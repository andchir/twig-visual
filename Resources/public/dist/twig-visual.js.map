{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"twig-visual.js","sourcesContent":["\nclass TwigVisual {\n\n    constructor() {\n        this.container = this.createContainer();\n        this.state = 'inactive';\n\n        this.listenerOnMouseOver = this.onMouseOver.bind(this);\n        this.listenerOnMouseOut = this.onMouseOut.bind(this);\n        this.listenerOnMouseWheel = this.onMouseWheel.bind(this);\n        this.listenerOnMouseClick = this.onSelectedElementClick.bind(this);\n        this.currentElements = [];\n\n        this.init();\n    }\n\n    static onReady(cb) {\n        if (document.readyState !== 'loading') {\n            cb();\n        } else {\n            document.addEventListener('DOMContentLoaded', cb);\n        }\n    };\n\n    init() {\n\n        // Start button\n        const buttonStart = document.createElement('button');\n        buttonStart.type = 'button';\n        buttonStart.textContent = 'Select';\n        buttonStart.addEventListener('click', (e) => {\n            e.preventDefault();\n            this.selectModeToggle();\n        });\n\n        this.container.appendChild(buttonStart);\n\n    }\n\n    selectModeToggle() {\n        if (this.state === 'inactive') {\n            document.addEventListener('mouseover', this.listenerOnMouseOver);\n            document.addEventListener('mouseout', this.listenerOnMouseOut);\n            document.addEventListener('wheel', this.listenerOnMouseWheel);\n            document.addEventListener('click', this.listenerOnMouseClick);\n            this.state = 'active';\n        } else {\n            document.removeEventListener('mouseover', this.listenerOnMouseOver);\n            document.removeEventListener('mouseout', this.listenerOnMouseOut);\n            document.removeEventListener('wheel', this.listenerOnMouseWheel);\n            document.removeEventListener('click', this.listenerOnMouseClick);\n            this.state = 'inactive';\n        }\n    }\n\n    onMouseOver(e) {\n        if (e.target.classList.contains('twig-visual-container')\n            || e.target.parentNode.classList.contains('twig-visual-container')) {\n            return;\n        }\n        this.currentElements = [];\n        e.target.classList.add('twig-visual-selected');\n    }\n\n    onMouseOut(e) {\n        if (e.target.classList.contains('twig-visual-container')\n            || e.target.parentNode.classList.contains('twig-visual-container')) {\n            return;\n        }\n        this.currentElements = [];\n        e.target.classList.remove('twig-visual-selected');\n    }\n\n    onSelectedElementClick(e) {\n        if (e.target.classList.contains('twig-visual-container')\n            || e.target.parentNode.classList.contains('twig-visual-container')) {\n            return;\n        }\n        e.preventDefault();\n        let currentElement = this.currentElements.length > 0\n            ? this.currentElements[this.currentElements.length - 1]\n            : e.target;\n        this.currentElements = [];\n        currentElement.classList.remove('twig-visual-selected');\n\n        console.log('onSelectedElementClick', currentElement);\n\n        this.selectModeToggle();\n    }\n\n    onMouseWheel(e) {\n        if (e.target.classList.contains('twig-visual-container')\n            || e.target.parentNode.classList.contains('twig-visual-container')) {\n            return;\n        }\n        let currentElement = this.currentElements.length > 0\n            ? this.currentElements[this.currentElements.length - 1]\n            : e.target;\n        if (e.deltaY < 0) {\n            currentElement.classList.remove('twig-visual-selected');\n            this.currentElements.push(currentElement.parentNode);\n            currentElement.parentNode.classList.add('twig-visual-selected');\n        } else {\n            currentElement.classList.remove('twig-visual-selected');\n            this.currentElements.splice(this.currentElements.length - 1, 1);\n            currentElement = this.currentElements.length > 0\n                ? this.currentElements[this.currentElements.length - 1]\n                : e.target;\n            currentElement.classList.add('twig-visual-selected');\n        }\n    }\n\n    createContainer() {\n        const containerEl = document.createElement('div');\n        containerEl.id = 'twig-visual-container';\n        containerEl.className = 'twig-visual-container';\n        document.body.appendChild(containerEl);\n        return containerEl;\n    }\n}\n\nlet twigVisual;\n\nTwigVisual.onReady(() => {\n    twigVisual = new TwigVisual();\n});\n"]}
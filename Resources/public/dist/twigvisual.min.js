/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "./";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var twv_translations = __webpack_require__(/*! ./translations.js */ "./translations.js");

var TwigVisual = __webpack_require__(/*! ./twigvisual.js */ "./twigvisual.js");

global.twv_translations = twv_translations;
global.TwigVisual = TwigVisual;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./translations.js":
/*!*************************!*\
  !*** ./translations.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {
  ru: {
    'Create new theme': 'Создать новую тему',
    'Create new template': 'Создать шаблон',
    'Interface item': 'Элемент интерфейса',
    'Undo the last action': 'Отменить последнее действие',
    'Execute batch of operations': 'Выполнить пакет операций',
    'Move left': 'Передвинуть влево',
    'Move right': 'Передвинуть вправо',
    'Apply': 'Применить',
    'Cancel': 'Отменить',
    'The "{title}" field is required.': 'Поле "{title}" обязательно.',
    'Insert': 'Вставить',
    'Insert before': 'Вставить до',
    'Insert after': 'Вставить после',
    'Selected': 'Выбрано',
    'Edit text content': 'Редактировать контент',
    'Edit link': 'Редактировать ссылку',
    'Replace image': 'Заменить картинку',
    'Delete element': 'Удалить элемент',
    'Move element': 'Переместить элемент',
    'Restore static': 'Восстановить статичное содержимое',
    'Interface item type': 'Тип блока интерфейса',
    'Save': 'Сохранить',
    'Add to operations list': 'Добавить в список операций',
    'URL': 'Ссылка',
    'Open in': 'Открыть в',
    'the current tab': 'текущей вкладке',
    'a new tab': 'новой вкладке',
    'Confirm': 'Подтвердить',
    'Create': 'Создать',
    'Are you sure you want to return the item to its original state?': 'Вы уверены, что хотите вернуть исходное состояние элемента?',
    'Theme name': 'Название темы',
    'HTML-file of the main page': 'HTML-файл главной страницы',
    'Template name': 'Название шаблона',
    'HTML-file': 'HTML-файл',
    'The selected item must have tag {tagName}.': 'Выбранный элемент должен иметь тег {tagName}.'
  }
};

/***/ }),

/***/ "./twigvisual.js":
/*!***********************!*\
  !*** ./twigvisual.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/**
 * TwigVisual
 * @version 1.0.0
 * @author Andchir<andchir@gmail.com>
 */
var TwigVisual =
/*#__PURE__*/
function () {
  "use strict";

  function TwigVisual(options) {
    _classCallCheck(this, TwigVisual);

    this.container = null;
    this.loading = false;
    this.parentElement = null;
    this.dataKey = 'source';
    this.data = {};
    this.actions = [];
    this.timer = null;
    this.components = [];
    this.options = Object.assign({
      templateName: '',
      templates: [],
      pageFields: [],
      uiOptions: {},
      locale: 'en'
    }, options);
    this.translations = window.twv_translations || {};
    this.state = 'inactive';
    this.listenerOnMouseOver = this.onMouseOver.bind(this);
    this.listenerOnMouseOut = this.onMouseOut.bind(this);
    this.listenerOnMouseWheel = this.onMouseWheel.bind(this);
    this.listenerOnMouseClick = this.onSelectedElementClick.bind(this);
    this.currentElements = [];
    this.selectedElement = null;
    TwigVisual.onReady(this.init.bind(this));
  }

  _createClass(TwigVisual, [{
    key: "init",
    value: function init() {
      var _this = this;

      this.container = this.createContainer(); // Start button

      var buttonStart = this.container.querySelector('.twv-button-start-select');
      buttonStart.addEventListener('click', function (e) {
        e.preventDefault();
        e.target.setAttribute('disabled', 'disabled');

        _this.removeSelectionInner();

        _this.selectModeToggle(document.body, 'source');
      }); // Add new theme

      var buttonAddTheme = this.container.querySelector('.twv-button-new-theme');
      buttonAddTheme.addEventListener('click', function (e) {
        e.preventDefault();

        if (_this.state === 'active') {
          _this.selectModeToggle();
        }

        _this.selectionModeDestroy(true);

        _this.addNewThemeInit();
      });
      this.container.querySelector('.twv-button-new-template').addEventListener('click', function (e) {
        e.preventDefault();

        if (_this.state === 'active') {
          _this.selectModeToggle();
        }

        _this.selectionModeDestroy(true);

        _this.addNewTemplateInit();
      });
      document.body.addEventListener('keyup', function (e) {
        if (e.code === 'Escape') {
          if (_this.state === 'active') {
            _this.selectModeToggle();
          }

          _this.selectionModeDestroy();
        }

        if (e.code === 'Enter') {
          if (_this.state === 'active') {
            var selectedEl = document.querySelector('.twv-selected');

            _this.selectModeApply(selectedEl);
          }
        }
      }); // Panel position recovery

      var panelClassName = this.getCookie('twv-panel-class-name');

      if (panelClassName) {
        this.container.className = panelClassName;
        this.container.classList.add('twig-visual-container');
      }
    }
  }, {
    key: "trans",
    value: function trans(str) {
      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var output;

      if (!this.translations[this.options.locale]) {
        output = str;
      } else {
        output = this.translations[this.options.locale][str] || str;
      }

      Object.keys(data).forEach(function (key) {
        output = output.replace("{".concat(key, "}"), data[key]);
      });
      return output;
    }
  }, {
    key: "selectModeToggle",
    value: function selectModeToggle(parentEl) {
      var dataKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'source';
      var hidePanel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      parentEl = parentEl || this.parentElement;

      if (this.state === 'inactive') {
        this.parentElement = parentEl;
        this.dataKey = dataKey;

        if (hidePanel) {
          this.container.style.display = 'none';
        }

        parentEl.addEventListener('mouseover', this.listenerOnMouseOver);
        parentEl.addEventListener('mouseout', this.listenerOnMouseOut);
        parentEl.addEventListener('wheel', this.listenerOnMouseWheel, {
          passive: false
        });
        parentEl.addEventListener('click', this.listenerOnMouseClick);
        this.state = 'active';
      } else {
        this.container.style.display = 'block';
        parentEl.removeEventListener('mouseover', this.listenerOnMouseOver);
        parentEl.removeEventListener('mouseout', this.listenerOnMouseOut);
        parentEl.removeEventListener('wheel', this.listenerOnMouseWheel);
        parentEl.removeEventListener('click', this.listenerOnMouseClick); // Remove attribute disabled

        if (this.container.querySelector('.twv-ui-components')) {
          var buttons = this.container.querySelector('.twv-ui-components').querySelectorAll('button');
          Array.from(buttons).forEach(function (buttonEl) {
            buttonEl.removeAttribute('disabled');
          });
        }

        var buttonStart = this.container.querySelector('.twv-button-start-select');
        buttonStart.removeAttribute('disabled');
        this.state = 'inactive';
        this.onAfterSelect();
      }
    }
  }, {
    key: "onAfterSelect",
    value: function onAfterSelect() {
      var _this2 = this;

      switch (this.dataKey) {
        case 'moveTarget':
          var innerContainerEl = this.container.querySelector('.twv-inner');
          var buttonStart = this.container.querySelector('.twv-button-start-select');
          this.makeButtonSelected(buttonStart, true, function () {
            _this2.selectionModeDestroy(true);

            return true;
          });
          this.removeOverlay();
          innerContainerEl.innerHTML = '';
          var div = document.createElement('div');
          div.className = 'twv-pt-1 twv-mb-3';
          div.innerHTML = "\n                    <div class=\"twv-mb-3\">\n                        <label class=\"twv-display-block\">\n                            <input type=\"radio\" name=\"insertMode\" value=\"inside\" checked=\"checked\">\n                            ".concat(this.trans('Insert'), "\n                        </label>\n                        <label class=\"twv-display-block\">\n                            <input type=\"radio\" name=\"insertMode\" value=\"before\">\n                            ").concat(this.trans('Insert before'), "\n                        </label>\n                        <label class=\"twv-display-block\">\n                            <input type=\"radio\" name=\"insertMode\" value=\"after\">\n                            ").concat(this.trans('Insert after'), "\n                        </label>\n                    </div>\n                    <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                        <i class=\"twv-icon-done\"></i>\n                        ").concat(this.trans('Apply'), "\n                    </button>\n                    <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                        <i class=\"twv-icon-clearclose\"></i>\n                    </button>\n                ");
          innerContainerEl.appendChild(div);
          var buttonSubmit = innerContainerEl.querySelector('.twv-button-submit');
          var buttonCancel = innerContainerEl.querySelector('.twv-button-cancel'); // Submit data

          buttonSubmit.addEventListener('click', function (e) {
            e.preventDefault();
            var insertMode = innerContainerEl.querySelector('input[name="insertMode"]:checked').value;

            _this2.showLoading(true);

            _this2.request('/twigvisual/move_element', {
              templateName: _this2.options.templateName,
              xpath: _this2.data.source,
              xpathTarget: _this2.data.moveTarget,
              insertMode: insertMode
            }, function (res) {
              if (res.success) {
                _this2.windowReload();
              } else {
                _this2.showLoading(false);
              }
            }, function (err) {
              _this2.addAlertMessage(err.error || err);

              _this2.showLoading(false);
            }, 'POST');
          }); // Submit data

          buttonCancel.addEventListener('click', function (e) {
            e.preventDefault();
            innerContainerEl.innerHTML = '';

            _this2.selectionModeDestroy(true);
          });
          break;
      }
    }
  }, {
    key: "onMouseOver",
    value: function onMouseOver(e) {
      var xpath = this.getXPathForElement(e.target, true);

      if (!xpath || this.getXPathForElement(e.target, true).indexOf('twig-visual-container') > -1) {
        return;
      }

      this.currentElements = [];
      this.updateXPathInfo(e.target);
      e.target.classList.add('twv-selected');
      this.displayPadding(e.target);
    }
  }, {
    key: "onMouseOut",
    value: function onMouseOut(e) {
      var xpath = this.getXPathForElement(e.target, true);

      if (!xpath || this.getXPathForElement(e.target, true).indexOf('twig-visual-container') > -1) {
        return;
      }

      this.currentElements = [];
      var elements = Array.from(document.querySelectorAll('.twv-selected'));
      elements.forEach(function (element) {
        element.classList.remove('twv-selected');
        element.style.boxShadow = '';
      });
    }
  }, {
    key: "onSelectedElementClick",
    value: function onSelectedElementClick(e) {
      var xpath = this.getXPathForElement(e.target, true);

      if (!xpath || this.getXPathForElement(e.target, true).indexOf('twig-visual-container') > -1) {
        return;
      }

      e.preventDefault();
      e.stopPropagation();
      this.selectModeApply(e.target);
    }
  }, {
    key: "selectModeApply",
    value: function selectModeApply() {
      var _this3 = this;

      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var currentElement = this.currentElements.length > 0 ? this.currentElements[this.currentElements.length - 1] : element;

      if (!currentElement) {
        return;
      }

      this.removeOverlay();
      var currentElementXpath = this.getXPathForElement(currentElement);
      this.data[this.dataKey] = currentElementXpath; // Clear selection

      if (this.data[this.dataKey]) {
        var xpath = this.data[this.dataKey];
        this.removeSelectionInnerByXPath(xpath);
      }

      if (this.state === 'active') {
        this.selectModeToggle();
      }

      this.selectionModeDestroy();

      if (this.dataKey === 'source') {
        this.parentElement = currentElement;
        this.createSelectionOptions(currentElementXpath);
      } else {
        this.highlightElement();
        currentElement.classList.add('twv-selected-success');
        var index = this.components.findIndex(function (item) {
          return item.name === _this3.dataKey;
        });

        if (index > -1) {
          if (currentElement.getAttribute('title') && !currentElement.dataset.twvTitle) {
            currentElement.dataset.twvTitle = currentElement.getAttribute('title');
          }

          currentElement.setAttribute('title', this.components[index].title);
        }

        this.componentButtonMakeSelected(this.dataKey);
      }
    }
    /**
     * Destroy selection mode
     * @param {boolean} reset
     * @param {boolean} resetData
     */

  }, {
    key: "selectionModeDestroy",
    value: function selectionModeDestroy() {
      var reset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var resetData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (document.querySelector('.twv-info')) {
        this.removeEl(document.querySelector('.twv-info'));
      }

      var elements = Array.from(document.querySelectorAll('.twv-selected'));
      elements.forEach(function (element) {
        element.classList.remove('twv-selected');
        element.style.boxShadow = '';
      });

      if (reset) {
        if (resetData) {
          this.data = {};
        }

        this.currentElements = [];
        this.components = [];
        var buttonStart = this.container.querySelector('.twv-button-start-select'); // Remove options

        buttonStart.parentNode.classList.remove('twv-block-active-status-active');
        this.container.querySelector('.twv-inner').innerHTML = '';
        this.removeOverlay(); // Remove selection of parent element

        var elementSelected = document.querySelector('.twv-selected-element');

        if (elementSelected) {
          elementSelected.contentEditable = false;

          if (elementSelected.dataset.twvContent) {
            elementSelected.innerHTML = elementSelected.dataset.twvContent;
            elementSelected.dataset.twvContent = '';
          }

          elementSelected.classList.remove('twv-selected-element');
          elementSelected.style.transform = '';
          elementSelected.style.transition = '';
          this.setToParents(elementSelected, {
            transform: '',
            transition: ''
          });
        }

        this.removeSelectionInner();
      }
    }
  }, {
    key: "onMouseWheel",
    value: function onMouseWheel(e) {
      if (this.getXPathForElement(e.target).indexOf('twig-visual-container') > -1) {
        return;
      }

      e.preventDefault();
      var currentElement = this.currentElements.length > 0 ? this.currentElements[this.currentElements.length - 1] : e.target;

      if (e.deltaY < 0) {
        currentElement.classList.remove('twv-selected');
        currentElement.style.boxShadow = '';
        this.currentElements.push(currentElement.parentNode);
        this.updateXPathInfo(currentElement.parentNode);
        currentElement.parentNode.classList.add('twv-selected');
        this.displayPadding(currentElement.parentNode);
      } else {
        currentElement.classList.remove('twv-selected');
        currentElement.style.boxShadow = '';
        this.currentElements.splice(this.currentElements.length - 1, 1);
        currentElement = this.currentElements.length > 0 ? this.currentElements[this.currentElements.length - 1] : e.target;
        this.updateXPathInfo(currentElement);
        currentElement.classList.add('twv-selected');
        this.displayPadding(currentElement);
      }
    }
    /**
     * Remove selection of inner elements
     */

  }, {
    key: "removeSelectionInner",
    value: function removeSelectionInner() {
      var selectedElements = Array.from(document.querySelectorAll('.twv-selected-success'));
      selectedElements.forEach(function (element) {
        if (element.dataset.twvTitle) {
          element.setAttribute('title', element.dataset.twvTitle);
        } else {
          element.removeAttribute('title');
        }

        element.classList.remove('twv-selected-success');
      });
    }
    /**
     * Remove selection by XPath
     * @param xpath
     */

  }, {
    key: "removeSelectionInnerByXPath",
    value: function removeSelectionInnerByXPath(xpath) {
      this.removeOverlay();
      var element = this.getElementByXPath(xpath);

      if (!element) {
        return false;
      }

      this.highlightElement();

      if (element.dataset.twvTitle) {
        element.setAttribute('title', element.dataset.twvTitle);
      } else {
        element.removeAttribute('title');
      }

      element.classList.remove('twv-selected-success');
      return true;
    }
    /**
     * Add overlay for element
     * @param element
     * @param targetClassName
     */

  }, {
    key: "highlightElement",
    value: function highlightElement() {
      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var targetClassName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'twv-selected-element';

      if (!element) {
        element = this.parentElement;
      }

      if (!element || element.tagName === 'BODY' || document.querySelector('.twv-back-overlay')) {
        return;
      }

      element.classList.add(targetClassName);
      var compStyles = window.getComputedStyle(element);
      var position = compStyles.getPropertyValue('position');
      var backgroundColor = compStyles.getPropertyValue('background-color');

      if (position === 'static') {
        element.style.position = 'relative';
      }

      if (['rgba(0, 0, 0, 0)', 'transparent'].indexOf(backgroundColor) > -1) {// element.style.backgroundColor = '#fff';
      }

      element.style.transform = 'none';
      element.style.transition = 'none';
      this.setToParents(element, {
        transform: 'none',
        transition: 'none'
      });
      var backgroundOverlay = document.createElement(element.tagName === 'LI' ? 'li' : 'div');
      backgroundOverlay.className = 'twv-back-overlay';
      this.insertBefore(backgroundOverlay, element);
    }
    /**
     * Remove overlay
     */

  }, {
    key: "removeOverlay",
    value: function removeOverlay() {
      if (document.querySelector('.twv-back-overlay')) {
        this.removeEl(document.querySelector('.twv-back-overlay'));
      }
    }
  }, {
    key: "updateXPathInfo",
    value: function updateXPathInfo(element) {
      var xpath = this.getXPathForElement(element, true);

      if (xpath.indexOf('twig-visual-container') > -1) {
        return;
      }

      var div = document.querySelector('.twv-info');

      if (!div) {
        div = document.createElement('div');
        div.className = 'twv-info small';
        document.body.appendChild(div);
      }

      div.style.display = 'block';
      div.innerHTML = "<div>".concat(xpath, "</div>");
    }
  }, {
    key: "getXPathForElement",
    value: function getXPathForElement(element) {
      var getAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (element.id !== '') return 'id("' + element.id + '")';
      if (element.tagName === 'HTML') return '/HTML[1]'.toLowerCase();
      if (element === document.body) return '/HTML[1]/BODY[1]'.toLowerCase();
      if (!element.parentNode) return '';
      var ix = 0;
      var siblings = element.parentNode.childNodes;

      for (var i = 0; i < siblings.length; i++) {
        var sibling = siblings[i];

        if (sibling === element) {
          return this.getXPathForElement(element.parentNode, getAttributes) + '/' + element.tagName.toLowerCase() + '[' + (ix + 1) + ']' + (getAttributes ? this.getXpathElementAttributes(element) : '');
        }

        if (sibling.nodeType === Node.ELEMENT_NODE && sibling.tagName === element.tagName) ix++;
      }
    }
  }, {
    key: "getXpathElementAttributes",
    value: function getXpathElementAttributes(element) {
      if (element.hasAttribute('id')) {
        return "id(\"".concat(element.id, "\")");
      } else if (element.hasAttribute('class') && element.getAttribute('class')) {
        return "[@class=\"".concat(element.getAttribute('class'), "\"]");
      }

      return '';
    }
  }, {
    key: "getElementByXPath",
    value: function getElementByXPath(xpath) {
      var parentEl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.document;
      var result = document.evaluate(xpath, parentEl, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
      return result.singleNodeValue;
    }
  }, {
    key: "createContainer",
    value: function createContainer() {
      var _this4 = this;

      var containerEl = document.createElement('div');
      containerEl.id = 'twig-visual-container';
      containerEl.className = 'twig-visual-container twv-panel-right';
      containerEl.innerHTML = "\n        <div class=\"twv-panel-header\">\n            <div class=\"twv-panel-header-buttons\">\n                <button class=\"twv-btn twv-btn-sm twv-ml-1 twv-button-undo\" type=\"button\" title=\"".concat(this.trans('Undo the last action'), "\">\n                    <i class=\"twv-icon-undo\"></i>\n                </button>\n                <button class=\"twv-btn twv-btn-sm twv-ml-1 twv-button-execute-batch\" type=\"button\" title=\"").concat(this.trans('Execute batch of operations'), "\" style=\"display: none;\">\n                    <i class=\"twv-icon-format_list_bulleted\"></i>\n                    <span></span>\n                </button>\n            </div>\n            <button class=\"twv-btn twv-btn-sm twv-mr-1 twv-button-panel-left\" type=\"button\" title=\"").concat(this.trans('Move left'), "\">\n                <i class=\"twv-icon-arrow_back\"></i>\n            </button>\n            <button class=\"twv-btn twv-btn-sm twv-button-panel-right\" type=\"button\" title=\"").concat(this.trans('Move right'), "\">\n                <i class=\"twv-icon-arrow_forward\"></i>\n            </button>\n        </div>\n        <div class=\"twv-mb-2\">\n            <button type=\"button\" class=\"twv-btn twv-btn-block twv-button-new-theme\">\n                <i class=\"twv-icon-add\"></i>\n                ").concat(this.trans('Create new theme'), "\n            </button>\n        </div>\n        <div class=\"twv-mb-2\">\n            <button type=\"button\" class=\"twv-btn twv-btn-block twv-button-new-template\">\n                <i class=\"twv-icon-add\"></i>\n                ").concat(this.trans('Create new template'), "\n            </button>\n        </div>\n        <div class=\"twv-mb-3\">\n            <button type=\"button\" class=\"twv-btn twv-btn-primary twv-btn-block twv-button-start-select\">\n                <i class=\"twv-icon-center_focus_strong\"></i>\n                ").concat(this.trans('Interface item'), "\n            </button>\n        </div>\n        <div class=\"twv-inner-wrapper\">\n            <div class=\"twv-inner\"></div>\n        </div>\n        ");
      document.body.appendChild(containerEl);
      containerEl.querySelector('.twv-button-panel-left').addEventListener('click', function (e) {
        e.preventDefault();

        _this4.panelMove('left');
      });
      containerEl.querySelector('.twv-button-panel-right').addEventListener('click', function (e) {
        e.preventDefault();

        _this4.panelMove('right');
      });
      containerEl.querySelector('.twv-button-execute-batch').addEventListener('click', function (e) {
        e.preventDefault();

        _this4.executeActionBatch();
      });
      containerEl.querySelector('.twv-button-undo').addEventListener('click', function (e) {
        e.preventDefault();

        _this4.restoreFromTemplateCopyA();
      });
      return containerEl;
    }
  }, {
    key: "panelMove",
    value: function panelMove(direction) {
      var newClassName = "twv-panel-".concat(direction);

      if (this.container.classList.contains(newClassName)) {
        this.container.classList.add('twv-panel-hidden');
        this.setCookie('twv-panel-class-name', this.container.className);
        return;
      } else if (this.container.classList.contains('twv-panel-hidden')) {
        this.container.classList.remove('twv-panel-hidden');
        this.setCookie('twv-panel-class-name', this.container.className);
        return;
      }

      this.container.classList.remove('twv-panel-' + (direction === 'left' ? 'right' : 'left'));
      this.container.classList.add(newClassName);
      this.setCookie('twv-panel-class-name', this.container.className);
    }
    /**
     * Change block type
     * @param parentElement
     * @param typeValue
     */

  }, {
    key: "onBlockUiTypeChange",
    value: function onBlockUiTypeChange(parentElement, typeValue) {
      var _this5 = this;

      var componentsContainer = this.container.querySelector('.twv-ui-components');
      componentsContainer.innerHTML = '';
      this.removeSelectionInner();

      if (!typeValue) {
        return;
      }

      if (!this.options.uiOptions[typeValue]) {
        return;
      } // Clean components data


      Object.keys(this.data).forEach(function (key) {
        if (key !== 'source') {
          delete _this5.data[key];
        }
      });
      var div = document.createElement('div');
      var optionsHTML = '';
      div.className = 'twv-pt-1 twv-mb-3';
      var opt = this.options.uiOptions[typeValue];
      this.components = opt.components;
      this.components.forEach(function (cmp) {
        var d = document.createElement('div');
        d.className = '';

        switch (cmp.type) {
          case 'elementSelect':
            d.innerHTML = "<div class=\"twv-mb-2\">\n                        <button data-twv-key=\"".concat(cmp.name, "\" class=\"twv-btn twv-btn-block twv-text-overflow\">").concat(cmp.title, "</button>\n                    </div>\n                    ");
            d.querySelector('button').addEventListener('click', function (e) {
              e.preventDefault();

              if (_this5.state === 'active') {
                return;
              }

              e.target.setAttribute('disabled', 'disabled');

              _this5.selectModeToggle(parentElement, cmp.name, false);
            });
            div.appendChild(d);
            break;

          case 'text':
            var value = '';

            if (cmp.styleName) {
              var compStyles = window.getComputedStyle(_this5.parentElement);

              if (compStyles[cmp.styleName]) {
                value = compStyles[cmp.styleName];
              }
            }

            d.innerHTML = "\n                    <div class=\"twv-mb-2\">\n                        <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-option-".concat(cmp.name, "\">").concat(cmp.title, "</label>\n                        <input type=\"text\" id=\"tww-field-option-").concat(cmp.name, "\" class=\"twv-form-control\" name=\"").concat(cmp.name, "\" value=\"").concat(value, "\">\n                    </div>\n                    ");
            div.appendChild(d);
            break;

          case 'checkbox':
            d.innerHTML = "\n                    <div class=\"twv-mb-2\">\n                        <input type=\"checkbox\" id=\"tww-field-option-".concat(cmp.name, "\" name=\"").concat(cmp.name, "\" value=\"1\">\n                        <label class=\"twv-display-inline twv-small twv-ml-1\" for=\"tww-field-option-").concat(cmp.name, "\">").concat(cmp.title, "</label>\n                    </div>\n                    ");
            div.appendChild(d);
            break;

          case 'radio':
            var html = '';

            if (cmp.title) {
              html += "<div class=\"twv-mb-2\">".concat(cmp.title, "</div>");
            }

            if (cmp.options) {
              cmp.options.forEach(function (option, index) {
                html += "\n                            <label class=\"twv-display-block\">\n                                <input type=\"radio\" name=\"".concat(cmp.name, "\" value=\"").concat(option.value, "\">\n                                ").concat(_this5.trans(option.title), "\n                             </label>\n                            ");
              });
            }

            d.innerHTML = html;
            d.className = 'twv-mb-3';
            div.appendChild(d);
            d.querySelector('input').checked = true;
            break;

          case 'pageField':
            optionsHTML = '';

            _this5.options.pageFields.forEach(function (pageField) {
              optionsHTML += "<option value=\"".concat(pageField.name, "\" data-type=\"").concat(pageField.type, "\">").concat(pageField.name, " - ").concat(pageField.type, "</option>");
            });

            d.innerHTML = "\n                    <div class=\"twv-mb-3\">\n                        <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-option-".concat(cmp.name, "\">").concat(cmp.title, "</label>\n                        <select id=\"tww-field-option-").concat(cmp.type, "\" class=\"twv-custom-select\" name=\"fieldName\">\n                            ").concat(optionsHTML, "\n                        </select>\n                    </div>\n                    ");
            div.appendChild(d);

            var onFieldSelectChange = function onFieldSelectChange(value, type) {
              var keyFieldEl = componentsContainer.querySelector('input[name="key"]');

              if (keyFieldEl) {
                var textFieldBlockEl = keyFieldEl.parentNode;
                textFieldBlockEl.style.display = ['object', 'array'].indexOf(type) > -1 ? 'block' : 'none';

                if (['object', 'array'].indexOf(type) === -1) {
                  keyFieldEl.value = '';
                }
              }
            };

            d.querySelector('select').addEventListener('change', function (e) {
              var selectEl = e.target;
              var selectedOption = selectEl.options[selectEl.selectedIndex];
              onFieldSelectChange(selectEl.value, selectedOption.dataset.type);
            });
            setTimeout(function () {
              onFieldSelectChange(d.querySelector('select').value, d.querySelector('select').querySelector('option').dataset.type);
            }, 1);
            break;

          case 'include':
            optionsHTML = '';

            _this5.showLoading(true);

            _this5.request("/twigvisual/includes", {}, function (res) {
              if (res.templates) {
                res.templates.forEach(function (templateName) {
                  optionsHTML += "<option value=\"".concat(templateName, "\">").concat(templateName, "</option>");
                });
                d.querySelector('select').innerHTML = optionsHTML;
              }

              _this5.showLoading(false);
            }, function (err) {
              _this5.addAlertMessage(err.error || err);

              _this5.showLoading(false);
            });

            d.innerHTML = "\n                    <div class=\"twv-mb-3\">\n                        <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-option-".concat(cmp.name, "\">").concat(cmp.title, "</label>\n                        <select id=\"tww-field-option-").concat(cmp.type, "\" class=\"twv-custom-select\" name=\"").concat(cmp.name, "\">\n                            ").concat(optionsHTML, "\n                        </select>\n                    </div>\n                    ");
            div.appendChild(d);
            break;
        }
      });
      componentsContainer.appendChild(div);
      div = document.createElement('div');
      div.className = 'twv-pt-1 twv-mb-3';
      div.innerHTML = "\n            <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                <i class=\"twv-icon-done\"></i>\n                ".concat(this.trans('Apply'), "\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                <i class=\"twv-icon-clearclose\"></i>\n            </button>\n        ");
      componentsContainer.appendChild(div);
      var buttonSubmit = this.container.querySelector('.twv-button-submit');
      var buttonCancel = this.container.querySelector('.twv-button-cancel'); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();
        var data = {
          templateName: _this5.options.templateName,
          data: _this5.data
        };
        Array.from(componentsContainer.querySelectorAll('input[type="text"]')).forEach(function (el) {
          data.data[el.name] = el.value;
        });
        Array.from(componentsContainer.querySelectorAll('select')).forEach(function (el) {
          data.data[el.name] = el.value;
        });
        Array.from(componentsContainer.querySelectorAll('input[type="checkbox"]')).forEach(function (el) {
          data.data[el.name] = el.checked;
        });

        if (!_this5.checkRequired(data.data, _this5.components)) {
          return;
        }

        buttonSubmit.setAttribute('disabled', 'disabled');
        buttonCancel.setAttribute('disabled', 'disabled');

        _this5.showLoading(true);

        _this5.request("/twigvisual/insert/".concat(typeValue), data, function (res) {
          if (res.success) {
            _this5.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this5.showLoading(false);
          }
        }, function (err) {
          _this5.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this5.showLoading(false);
        }, 'POST');
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();

        var selectEl = _this5.container.querySelector('.twv-ui-element-select > select');

        var elementSelected = document.querySelector('.twv-selected-element');

        if (document.querySelector('.twv-info')) {
          _this5.removeEl(document.querySelector('.twv-info'));
        }

        if (_this5.state === 'active') {
          _this5.selectModeToggle();

          return;
        }

        if (selectEl.value) {
          selectEl.value = '';

          _this5.selectionModeDestroy();

          _this5.onBlockUiTypeChange(elementSelected);
        } else {
          _this5.selectionModeDestroy(true);
        }
      });
    }
  }, {
    key: "checkRequired",
    value: function checkRequired(data, components) {
      var result = true;
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = components[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var cmp = _step.value;

          if (cmp.required && !data[cmp.name]) {
            result = false;
            alert(this.trans('The "{title}" field is required.', {
              title: cmp.title
            }));
            break;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator["return"] != null) {
            _iterator["return"]();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return result;
    }
  }, {
    key: "componentButtonMakeSelected",
    value: function componentButtonMakeSelected(dataKey) {
      var _this6 = this;

      var componentsContainer = this.container.querySelector('.twv-ui-components');

      if (!componentsContainer) {
        return;
      }

      var buttons = Array.from(componentsContainer.querySelectorAll('button'));
      buttons = buttons.filter(function (buttonEl) {
        return buttonEl.dataset.twvKey === dataKey;
      });

      if (buttons.length === 1) {
        this.makeButtonSelected(buttons[0], true, function () {
          var xpath = _this6.data[dataKey] || null;

          if (_this6.removeSelectionInnerByXPath(xpath)) {
            delete _this6.data[dataKey];
            return true;
          }

          return false;
        });
      }
    }
    /**
     * Mark button as selected
     * @param buttonEl
     * @param selected
     * @param cancelFunc
     */

  }, {
    key: "makeButtonSelected",
    value: function makeButtonSelected(buttonEl) {
      var _this7 = this;

      var selected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cancelFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      buttonEl.removeAttribute('disabled');

      if (buttonEl.parentNode.classList.contains('twv-block-active-status')) {
        if (selected) {
          buttonEl.parentNode.classList.add('twv-block-active-status-active');
        } else {
          buttonEl.parentNode.classList.remove('twv-block-active-status-active');
        }

        return;
      }

      var title = buttonEl.textContent.trim();
      var div = document.createElement('div');
      div.innerHTML = "\n        <div class=\"twv-block-active-status twv-block-active-status-active\">\n            <div class=\"twv-block-active-status-active-content\">\n                <div class=\"twv-input-group\">\n                    <span class=\"twv-input-group-text twv-flex-fill\" title=\"".concat(title, "\">\n                        <i class=\"twv-icon-done twv-mr-2 twv-text-success\"></i>\n                        ").concat(this.trans('Selected'), "\n                    </span>\n                    <div class=\"twv-input-group-append\">\n                        <button class=\"twv-btn twv-block-active-status-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                            <i class=\"twv-icon-clearclose\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        ");
      buttonEl.classList.add('twv-block-active-status-inactive-content');
      this.insertAfter(div, buttonEl);
      div.querySelector('.twv-block-active-status').appendChild(buttonEl);
      buttonEl.parentNode.querySelector('.twv-block-active-status-button-cancel').addEventListener('click', function (e) {
        e.preventDefault();

        if (typeof cancelFunc === 'function') {
          cancelFunc() && _this7.makeButtonSelected(buttonEl, false);
        } else {
          _this7.makeButtonSelected(buttonEl, false);
        }
      });
    }
  }, {
    key: "createSelectionOptions",
    value: function createSelectionOptions(xpath) {
      var _this8 = this;

      var elementSelected = this.getElementByXPath(xpath);

      if (!elementSelected) {
        throw new Error('Element for XPath not found.');
      }

      var buttonStart = this.container.querySelector('.twv-button-start-select');
      this.makeButtonSelected(buttonStart, true, function () {
        _this8.selectionModeDestroy(true);

        return true;
      });
      this.container.querySelector('.twv-inner').innerHTML = '';
      var optionsHTML = '';
      Object.keys(this.options.uiOptions).forEach(function (key) {
        optionsHTML += "<option value=\"".concat(key, "\">").concat(_this8.options.uiOptions[key].title, "</option>");
      });
      var xpathEscaped = xpath.replace(/[\"]/g, '&quot;');
      var div = document.createElement('div');
      div.innerHTML = "\n        <b>XPath:</b>\n        <div class=\"twv-p-1 twv-mb-3 twv-small twv-bg-gray\">\n            <div class=\"twv-text-overflow\" title=\"".concat(xpathEscaped, "\">").concat(xpath, "</div>\n        </div>\n        <div class=\"twv-mb-3 twv-nowrap\">\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-edit-text\" title=\"").concat(this.trans('Edit text content'), "\">\n                <i class=\"twv-icon-createmode_editedit\"></i>\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-edit-link\" title=\"").concat(this.trans('Edit link'), "\">\n                <i class=\"twv-icon-linkinsert_link\"></i>\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-replace-image\" title=\"").concat(this.trans('Replace image'), "\">\n                <i class=\"twv-icon-insert_photoimagephoto\"></i>\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-delete-element\" title=\"").concat(this.trans('Delete element'), "\">\n                <i class=\"twv-icon-delete_outline\"></i>\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-move-element\" title=\"").concat(this.trans('Move element'), "\">\n                <i class=\"twv-icon-move\"></i>\n            </button>\n            <button type=\"button\" class=\"twv-btn twv-mr-1 twv-button-restore-static\" title=\"").concat(this.trans('Restore static'), "\">\n                <i class=\"twv-icon-cached\"></i>\n            </button>\n        </div>\n        <div class=\"twv-mb-3 twv-ui-element-select\">\n            <select class=\"twv-custom-select\">\n                <option value=\"\">- ").concat(this.trans('Interface item type'), " -</option>\n                ").concat(optionsHTML, "\n            </select>\n        </div>\n        <div class=\"twv-mb-3 twv-ui-components\"></div>\n        ");
      this.container.querySelector('.twv-inner').appendChild(div);
      var selectEl = this.container.querySelector('.twv-ui-element-select > select'); // Select UI element type

      selectEl.addEventListener('change', function (e) {
        _this8.onBlockUiTypeChange(elementSelected, e.target.value);
      }); // Button edit text

      this.container.querySelector('.twv-button-edit-text').addEventListener('click', function (e) {
        e.preventDefault();

        _this8.editTextContentInit(elementSelected);
      }); // Button edit link

      this.container.querySelector('.twv-button-edit-link').addEventListener('click', function (e) {
        e.preventDefault();

        _this8.editLinkInit(elementSelected);
      }); // Replace image

      this.container.querySelector('.twv-button-replace-image').addEventListener('click', function (e) {
        e.preventDefault();

        _this8.replaceImageInit(elementSelected);
      }); // Button delete element

      this.container.querySelector('.twv-button-delete-element').addEventListener('click', function (e) {
        e.preventDefault();

        _this8.deleteElementInit(elementSelected);
      });
      this.container.querySelector('.twv-button-move-element').addEventListener('click', function (e) {
        e.preventDefault();
        e.target.setAttribute('disabled', 'disabled');

        _this8.moveElementInit();
      });
      this.container.querySelector('.twv-button-restore-static').addEventListener('click', function (e) {
        e.preventDefault();

        _this8.restoreStaticInit();
      });
      this.highlightElement(elementSelected, 'twv-selected-element');
    }
    /**
     * Edit text content
     * @param {HTMLElement} elementSelected
     */

  }, {
    key: "editTextContentInit",
    value: function editTextContentInit(elementSelected) {
      var _this9 = this;

      this.clearMessage();
      var componentsContainer = this.container.querySelector('.twv-ui-components');
      var innerHTML = elementSelected.innerHTML;
      componentsContainer.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n            <div class=\"twv-mb-3\">\n                <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                    <i class=\"twv-icon-done\"></i>\n                    ".concat(this.trans('Save'), "\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-mr-1 twv-button-add-list\" title=\"").concat(this.trans('Add to operations list'), "\">\n                    <i class=\"twv-icon-format_list_bulleted\"></i>\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                    <i class=\"twv-icon-clearclose\"></i>\n                </button>\n            </div>\n            ");
      componentsContainer.appendChild(div);
      elementSelected.dataset.twvContent = innerHTML;
      elementSelected.contentEditable = true;
      elementSelected.focus();
      var buttonSubmit = this.container.querySelector('.twv-button-submit');
      var buttonCancel = this.container.querySelector('.twv-button-cancel'); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();
        elementSelected.contentEditable = false;
        buttonSubmit.setAttribute('disabled', 'disabled');
        buttonCancel.setAttribute('disabled', 'disabled');

        _this9.showLoading(true);

        _this9.request('/twigvisual/edit_content', {
          templateName: _this9.options.templateName,
          xpath: _this9.data.source,
          textContent: elementSelected.innerHTML
        }, function (res) {
          if (res.success) {
            _this9.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this9.showLoading(false);
          }
        }, function (err) {
          _this9.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this9.showLoading(false);
        }, 'POST');
      }); // Add to action list

      this.container.querySelector('.twv-button-add-list').addEventListener('click', function (e) {
        e.preventDefault();

        _this9.addToActionBatch('edit_content', _this9.data.source, {
          value: elementSelected.innerHTML
        });
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();
        elementSelected.contentEditable = false;
        componentsContainer.innerHTML = '';
        elementSelected.innerHTML = innerHTML;
      });
    }
    /**
     * Edit link
     * @param {HTMLElement} elementSelected
     */

  }, {
    key: "editLinkInit",
    value: function editLinkInit(elementSelected) {
      var _this10 = this;

      if (elementSelected.tagName.toLowerCase() !== 'a') {
        alert(this.trans('The selected item must have tag {tagName}.', {
          tagName: 'A'
        }));
        return;
      }

      this.clearMessage();
      var componentsContainer = this.container.querySelector('.twv-ui-components');
      var href = elementSelected.getAttribute('href');
      var target = elementSelected.getAttribute('target');
      componentsContainer.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n            <div class=\"twv-mb-3\">\n                <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-element-link\">".concat(this.trans('URL'), "</label>\n                <input type=\"text\" id=\"tww-field-element-link\" class=\"twv-form-control\" value=\"").concat(href, "\">\n            </div>\n            <div class=\"twv-mb-3\">\n                <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-element-link\">").concat(this.trans('Open in'), "</label>\n                <select id=\"tww-field-link-target\" class=\"twv-custom-select\">\n                    <option value=\"_self\"").concat(target != '_blank' ? ' selected="selected"' : '', ">").concat(this.trans('the current tab'), "</option>\n                    <option value=\"_blank\"").concat(target == '_blank' ? ' selected="selected"' : '', ">").concat(this.trans('a new tab'), "</option>\n                </select>\n            </div>\n            <div class=\"twv-mb-3\">\n                <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                    <i class=\"twv-icon-done\"></i>\n                    ").concat(this.trans('Save'), "\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-mr-1 twv-button-add-list\" title=\"").concat(this.trans('Add to operations list'), "\">\n                    <i class=\"twv-icon-format_list_bulleted\"></i>\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                    <i class=\"twv-icon-clearclose\"></i>\n                </button>\n            </div>\n            ");
      componentsContainer.appendChild(div);
      var buttonSubmit = this.container.querySelector('.twv-button-submit');
      var buttonCancel = this.container.querySelector('.twv-button-cancel'); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();

        _this10.showLoading(true);

        _this10.request('/twigvisual/edit_link', {
          templateName: _this10.options.templateName,
          xpath: _this10.data.source,
          href: div.querySelector('input[type="text"]').value,
          target: div.querySelector('select').value
        }, function (res) {
          if (res.success) {
            _this10.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this10.showLoading(false);
          }
        }, function (err) {
          _this10.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this10.showLoading(false);
        }, 'POST');
      }); // Add to action list

      this.container.querySelector('.twv-button-add-list').addEventListener('click', function (e) {
        e.preventDefault();

        _this10.addToActionBatch('edit_link', _this10.data.source, {
          href: div.querySelector('input[type="text"]').value,
          target: div.querySelector('select').value
        });
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();
        elementSelected.contentEditable = false;
        componentsContainer.innerHTML = '';
        elementSelected.setAttribute('href', href);
      });
    }
    /**
     * Replace image
     * @param elementSelected
     */

  }, {
    key: "replaceImageInit",
    value: function replaceImageInit(elementSelected) {
      var _this11 = this;

      if (elementSelected.tagName.toLowerCase() !== 'img') {
        alert(this.trans('The selected item must have tag {tagName}.', {
          tagName: 'IMG'
        }));
        return;
      }

      this.clearMessage();
      var componentsContainer = this.container.querySelector('.twv-ui-components');
      componentsContainer.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n            <div class=\"twv-mb-3 twv-text-center\"><img class=\"twv-image-preview\" style=\"max-width: 80%;\"></div>\n            <input type=\"file\" style=\"display: none;\" name=\"image_file\">\n            <div class=\"twv-mb-3\">\n                <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                    <i class=\"twv-icon-done\"></i>\n                    ".concat(this.trans('Save'), "\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                    <i class=\"twv-icon-clearclose\"></i>\n                </button>\n            </div>\n            ");
      componentsContainer.appendChild(div);
      var buttonSubmit = this.container.querySelector('.twv-button-submit');
      var buttonCancel = this.container.querySelector('.twv-button-cancel');
      var fileField = this.container.querySelector('input[type="file"]');
      var imagePreviewEl = this.container.querySelector('.twv-image-preview');
      imagePreviewEl.setAttribute('src', elementSelected.getAttribute('src')); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();
        var formData = new FormData();
        formData.append('templateName', _this11.options.templateName);
        formData.append('xpath', _this11.data.source);
        formData.append('imageFile', fileField.files[0]);

        _this11.showLoading(true);

        _this11.request('/twigvisual/replace_image', formData, function (res) {
          if (res.success) {
            _this11.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this11.showLoading(false);
          }
        }, function (err) {
          _this11.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this11.showLoading(false);
        }, 'POST');
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();
        elementSelected.contentEditable = false;
        componentsContainer.innerHTML = '';
      });

      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            imagePreviewEl.setAttribute('src', e.target.result);
          };

          reader.readAsDataURL(input.files[0]);
        }
      } // File field


      fileField.addEventListener('change', function (e) {
        readURL(e.target);
      });
      fileField.click();
      imagePreviewEl.addEventListener('click', function (e) {
        e.preventDefault();
        fileField.click();
      });
    }
    /**
     * Delete selected element
     * @param {HTMLElement} elementSelected
     */

  }, {
    key: "deleteElementInit",
    value: function deleteElementInit(elementSelected) {
      var _this12 = this;

      this.clearMessage();
      var componentsContainer = this.container.querySelector('.twv-ui-components');
      var textContent = elementSelected.textContent.trim();
      componentsContainer.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n            <div class=\"twv-mb-3\">\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442?</div>\n            <div class=\"twv-mb-3\">\n                <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                    <i class=\"twv-icon-done\"></i>\n                    ".concat(this.trans('Confirm'), "\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-mr-1 twv-button-add-list\" title=\"").concat(this.trans('Add to operations list'), "\">\n                    <i class=\"twv-icon-format_list_bulleted\"></i>\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                    <i class=\"twv-icon-clearclose\"></i>\n                </button>\n            </div>\n            ");
      componentsContainer.appendChild(div);
      var buttonSubmit = this.container.querySelector('.twv-button-submit');
      var buttonCancel = this.container.querySelector('.twv-button-cancel'); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();

        _this12.showLoading(true);

        _this12.request('/twigvisual/delete_element', {
          templateName: _this12.options.templateName,
          xpath: _this12.data.source
        }, function (res) {
          if (res.success) {
            _this12.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this12.showLoading(false);
          }
        }, function (err) {
          _this12.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this12.showLoading(false);
        }, 'POST');
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();
        componentsContainer.innerHTML = '';
      }); // Add to action list

      this.container.querySelector('.twv-button-add-list').addEventListener('click', function (e) {
        e.preventDefault();

        _this12.addToActionBatch('delete', _this12.data.source);
      });
    }
  }, {
    key: "moveElementInit",
    value: function moveElementInit() {
      var _this13 = this;

      var componentsContainer = this.container.querySelector('.twv-ui-components');
      componentsContainer.innerHTML = '';
      this.selectionModeDestroy(true, false);
      setTimeout(function () {
        _this13.selectModeToggle(document.body, 'moveTarget');
      }, 1);
    }
  }, {
    key: "restoreStaticInit",
    value: function restoreStaticInit() {
      var _this14 = this;

      this.clearMessage();
      var componentsContainer = this.container.querySelector('.twv-ui-components');
      componentsContainer.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n            <div class=\"twv-mb-3\">".concat(this.trans('Are you sure you want to return the item to its original state?'), "</div>\n            <div class=\"twv-mb-3\">\n                <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">\n                    <i class=\"twv-icon-done\"></i>\n                    ").concat(this.trans('Confirm'), "\n                </button>\n                <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\" title=\"").concat(this.trans('Cancel'), "\">\n                    <i class=\"twv-icon-clearclose\"></i>\n                </button>\n            </div>\n            ");
      componentsContainer.appendChild(div);
      var buttonSubmit = componentsContainer.querySelector('.twv-button-submit');
      var buttonCancel = componentsContainer.querySelector('.twv-button-cancel'); // Submit data

      buttonSubmit.addEventListener('click', function (e) {
        e.preventDefault();

        _this14.showLoading(true);

        _this14.request('/twigvisual/restore_static', {
          templateName: _this14.options.templateName,
          xpath: _this14.data.source
        }, function (res) {
          if (res.success) {
            _this14.windowReload();
          } else {
            buttonSubmit.removeAttribute('disabled');
            buttonCancel.removeAttribute('disabled');

            _this14.showLoading(false);
          }
        }, function (err) {
          _this14.addAlertMessage(err.error || err);

          buttonSubmit.removeAttribute('disabled');
          buttonCancel.removeAttribute('disabled');

          _this14.showLoading(false);
        }, 'POST');
      }); // Cancel

      buttonCancel.addEventListener('click', function (e) {
        e.preventDefault();

        _this14.clearMessage();

        componentsContainer.innerHTML = '';
      });
    }
  }, {
    key: "addNewThemeInit",
    value: function addNewThemeInit() {
      var _this15 = this;

      this.clearMessage();
      var innerContainerEl = this.container.querySelector('.twv-inner');
      innerContainerEl.innerHTML = '';
      var div = document.createElement('div');
      div.innerHTML = "\n        <div class=\"twv-mb-3\">\n            <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-theme-name\">".concat(this.trans('Theme name'), "</label>\n            <input type=\"text\" id=\"tww-field-theme-name\" class=\"twv-form-control\">\n        </div>\n        <div class=\"twv-mb-3\">\n            <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-theme-mainpage\">").concat(this.trans('HTML-file of the main page'), "</label>\n            <input type=\"text\" id=\"tww-field-theme-mainpage\" class=\"twv-form-control\" value=\"index.html\">\n        </div>\n        <div class=\"twv-mb-3\">\n            <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">").concat(this.trans('Create'), "</button>\n            <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\">").concat(this.trans('Cancel'), "</button>\n        </div>\n        ");
      innerContainerEl.appendChild(div);
      innerContainerEl.querySelector('button.twv-button-submit').addEventListener('click', function (e) {
        e.preventDefault();
        var fieldThemeEl = document.getElementById('tww-field-theme-name');
        var fieldMainpageEl = document.getElementById('tww-field-theme-mainpage');
        var buttonEl = e.target;

        if (!fieldThemeEl.value || !fieldMainpageEl.value) {
          return;
        }

        _this15.clearMessage();

        _this15.showLoading(true);

        buttonEl.setAttribute('disabled', 'disabled');

        _this15.request('/twigvisual/create', {
          theme: fieldThemeEl.value,
          mainpage: fieldMainpageEl.value
        }, function (res) {
          buttonEl.removeAttribute('disabled');

          _this15.showLoading(false);

          if (res && res.success) {
            innerContainerEl.innerHTML = '';
          }

          if (res.message) {
            _this15.addAlertMessage(res.message, 'success');
          }
        }, function (err) {
          _this15.addAlertMessage(err.error || err);

          buttonEl.removeAttribute('disabled');

          _this15.showLoading(false);
        }, 'POST');
      });
      innerContainerEl.querySelector('button.twv-button-cancel').addEventListener('click', function (e) {
        e.preventDefault();
        innerContainerEl.innerHTML = '';
      });
    }
  }, {
    key: "addNewTemplateInit",
    value: function addNewTemplateInit() {
      var _this16 = this;

      this.clearMessage();
      var innerContainerEl = this.container.querySelector('.twv-inner');
      innerContainerEl.innerHTML = '';
      var optionsHTML = '';
      this.options.templates.forEach(function (templatePath) {
        optionsHTML += "<option value=\"".concat(templatePath, "\">").concat(templatePath, "</option>");
      });
      this.showLoading(true);
      this.request('/twigvisual/html_files', {}, function (res) {
        if (res.files) {
          var html = '';
          res.files.forEach(function (fileName) {
            html += "<option value=\"".concat(fileName, "\">").concat(fileName, "</option>");
          });
          document.getElementById('tww-field-source-file').innerHTML = html;
        }

        _this16.showLoading(false);
      }, function (err) {
        _this16.addAlertMessage(err.error || err);

        _this16.showLoading(false);
      });
      var div = document.createElement('div');
      div.innerHTML = "\n        <div class=\"twv-mb-3\">\n            <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-source-file\">".concat(this.trans('HTML-file'), "</label>\n            <select id=\"tww-field-source-file\" class=\"twv-custom-select\"></select>\n        </div>\n        <div class=\"twv-mb-3\">\n            <label class=\"twv-display-block twv-mb-1\" for=\"tww-field-template-name\">").concat(this.trans('Template name'), "</label>\n            <select id=\"tww-field-template-name\" class=\"twv-custom-select\">\n                ").concat(optionsHTML, "\n            </select>\n        </div>\n        <div class=\"twv-mb-3\">\n            <button type=\"button\" class=\"twv-btn twv-btn-primary twv-mr-1 twv-button-submit\">").concat(this.trans('Create'), "</button>\n            <button type=\"button\" class=\"twv-btn twv-btn twv-button-cancel\">").concat(this.trans('Cancel'), "</button>\n        </div>\n        ");
      innerContainerEl.appendChild(div);
      innerContainerEl.querySelector('button.twv-button-submit').addEventListener('click', function (e) {
        e.preventDefault();
        var fieldFileNameEl = document.getElementById('tww-field-source-file');
        var fieldTemplateNameEl = document.getElementById('tww-field-template-name');
        var buttonEl = e.target;

        if (!fieldFileNameEl.value || !fieldTemplateNameEl.value) {
          return;
        }

        _this16.showLoading(true);

        buttonEl.setAttribute('disabled', 'disabled');

        _this16.request('/twigvisual/create_template', {
          fileName: fieldFileNameEl.value,
          templateName: fieldTemplateNameEl.value
        }, function (res) {
          buttonEl.removeAttribute('disabled');

          _this16.showLoading(false);

          innerContainerEl.innerHTML = '';

          if (res.message) {
            _this16.addAlertMessage(res.message, 'success');
          }
        }, function (err) {
          _this16.addAlertMessage(err.error || err);

          buttonEl.removeAttribute('disabled');

          _this16.showLoading(false);
        }, 'POST');
      });
      innerContainerEl.querySelector('button.twv-button-cancel').addEventListener('click', function (e) {
        e.preventDefault();
        innerContainerEl.innerHTML = '';
      });
    }
    /**
     * Add operation for batch execution
     * @param {string} action
     * @param {string} xpath
     * @param {object} options
     */

  }, {
    key: "addToActionBatch",
    value: function addToActionBatch(action, xpath) {
      var _this17 = this;

      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      this.actions.push({
        action: action,
        xpath: xpath,
        options: options
      });
      this.selectionModeDestroy(true);
      var buttonEl = this.container.querySelector('.twv-button-execute-batch');
      buttonEl.querySelector('span').textContent = "".concat(this.actions.length);
      buttonEl.style.display = 'inline-block';
      this.actions.forEach(function (action) {
        var element = _this17.getElementByXPath(action.xpath);

        if (element) {
          element.classList.add('twv-selected-success');
        }
      });
    }
    /**
     * Execute actions batch
     */

  }, {
    key: "executeActionBatch",
    value: function executeActionBatch() {
      var _this18 = this;

      if (this.actions.length === 0) {
        return;
      }

      this.showLoading(true);
      this.request('/twigvisual/batch', {
        templateName: this.options.templateName,
        actions: this.actions
      }, function (res) {
        if (res.success) {
          _this18.windowReload();
        }

        _this18.showLoading(false);
      }, function (err) {
        _this18.addAlertMessage(err.error || err);

        _this18.showLoading(false);
      }, 'POST');
    }
  }, {
    key: "restoreFromTemplateCopyA",
    value: function restoreFromTemplateCopyA() {
      var _this19 = this;

      this.showLoading(true);
      this.request('/twigvisual/restore_backup', {
        templateName: this.options.templateName
      }, function (res) {
        if (res.success) {
          _this19.windowReload();
        }

        _this19.showLoading(false);
      }, function (err) {
        _this19.addAlertMessage(err.error || err);

        _this19.showLoading(false);
      }, 'POST');
    }
  }, {
    key: "showLoading",
    value: function showLoading() {
      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.loading = enabled;

      if (enabled) {
        this.container.classList.add('twv-loading');
      } else {
        this.container.classList.remove('twv-loading');
      }
    }
    /**
     * Show message
     * @param message
     * @param type
     */

  }, {
    key: "addAlertMessage",
    value: function addAlertMessage(message) {
      var _this20 = this;

      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'danger';
      clearTimeout(this.timer);
      var innerContainerEl = this.container.querySelector('.twv-inner');

      if (innerContainerEl.querySelector('.twv-alert')) {
        this.removeEl(innerContainerEl.querySelector('.twv-alert'));
      }

      var div = document.createElement('div');
      div.innerHTML = "\n        <div class=\"twv-alert twv-alert-".concat(type, "\">").concat(message, "</div>\n        ");
      innerContainerEl.appendChild(div);
      div.addEventListener('mouseenter', function () {
        clearTimeout(_this20.timer);
      });
      div.addEventListener('mouseleave', function () {
        _this20.timer = setTimeout(_this20.clearMessage.bind(_this20), 4000);
      });
      this.timer = setTimeout(this.clearMessage.bind(this), 4000);
    }
  }, {
    key: "clearMessage",
    value: function clearMessage() {
      var innerContainerEl = this.container.querySelector('.twv-inner');

      if (innerContainerEl.querySelector('.twv-alert')) {
        this.removeEl(innerContainerEl.querySelector('.twv-alert'));
      }
    }
    /**
     * Display padding of the HTML element
     * @param element
     */

  }, {
    key: "displayPadding",
    value: function displayPadding(element) {
      var compStyles = window.getComputedStyle(element);
      var boxShadow = '0 0 0 2px #007bff';

      if (compStyles['padding-top'] !== '0px') {
        boxShadow += ", inset 0 ".concat(compStyles['padding-top'], " 0 0 rgba(50,168,82,0.15)");
      }

      if (compStyles['padding-bottom'] !== '0px') {
        boxShadow += ", inset 0 -".concat(compStyles['padding-bottom'], " 0 0 rgba(50,168,82,0.15)");
      }

      if (compStyles['padding-left'] !== '0px') {
        boxShadow += ", inset ".concat(compStyles['padding-left'], " 0 0 0 rgba(50,168,82,0.15)");
      }

      if (compStyles['padding-right'] !== '0px') {
        boxShadow += ", inset -".concat(compStyles['padding-right'], " 0 0 0 rgba(50,168,82,0.15)");
      }

      if (boxShadow) {
        element.style.boxShadow = boxShadow;
      }
    }
    /**
     * Ajax request
     * @param url
     * @param data
     * @param successFn
     * @param failFn
     * @param method
     */

  }, {
    key: "request",
    value: function request(url, data, successFn, failFn) {
      var method = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'GET';
      var request = new XMLHttpRequest();
      request.open(method, url, true);

      request.onload = function () {
        var result = ['{', '['].indexOf(request.responseText.substr(0, 1)) > -1 ? JSON.parse(request.responseText) : {};

        if (request.status >= 200 && request.status < 400) {
          if (typeof successFn === 'function') {
            successFn(result);
          }
        } else {
          if (typeof failFn === 'function') {
            failFn(result);
          }
        }
      };

      request.onerror = function () {
        if (typeof failFn === 'function') {
          failFn(request);
        }
      };

      request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');

      if (!(data instanceof FormData)) {
        data = JSON.stringify(data);
        request.setRequestHeader('Content-type', 'application/json; charset=utf-8');
      }

      if (method === 'POST') {
        request.send(data);
      } else {
        request.send();
      }
    }
  }, {
    key: "windowReload",
    value: function windowReload() {
      var locationHref = window.location.protocol + '//' + window.location.hostname + window.location.pathname;
      window.location.href = locationHref;
    }
    /**
     * Set styles to parents
     * @param element
     * @param styles
     */

  }, {
    key: "setToParents",
    value: function setToParents(element, styles) {
      if (!element || !element.parentNode || element.tagName === 'BODY' || element.parentNode.tagName === 'BODY') {
        return;
      }

      Object.keys(styles).forEach(function (key) {
        element.parentNode.style[key] = styles[key];
      });

      if (element.tagName !== 'BODY') {
        this.setToParents(element.parentNode, styles);
      }
    }
    /**
     * Remove HTML element
     * @param el
     */

  }, {
    key: "removeEl",
    value: function removeEl(el) {
      el.parentNode.removeChild(el);
    }
  }, {
    key: "insertAfter",

    /**
     * Insert HTML element after other one
     * @param newNode
     * @param referenceNode
     */
    value: function insertAfter(newNode, referenceNode) {
      referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }
    /**
     * Insert HTML element before other one
     * @param newNode
     * @param referenceNode
     */

  }, {
    key: "insertBefore",
    value: function insertBefore(newNode, referenceNode) {
      referenceNode.parentNode.insertBefore(newNode, referenceNode);
    }
    /**
     * 
     * @param element
     * @param nodeType
     * @param count
     * @returns {Node | null}
     */

  }, {
    key: "getNodePreviousSiblingByType",
    value: function getNodePreviousSiblingByType(element, nodeType, count) {
      if (element.previousSibling && element.previousSibling.nodeType !== nodeType && count > 0) {
        return this.getNodePreviousSiblingByType(element.previousSibling, nodeType, --count);
      }

      return element.previousSibling;
    }
  }, {
    key: "generateRandomString",
    value: function generateRandomString() {
      var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;
      var result = '';
      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      var charactersLength = characters.length;

      for (var i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength));
      }

      return result;
    }
  }, {
    key: "setCookie",
    value: function setCookie(cname, cvalue) {
      var exdays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 7;
      var d = new Date();
      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
      var expires = 'expires=' + d.toUTCString();
      document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/';
    }
  }, {
    key: "getCookie",
    value: function getCookie(cname) {
      var name = cname + '=';
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');

      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];

        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }

        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }

      return '';
    }
  }], [{
    key: "onLoad",
    value: function onLoad(cb) {
      if (document.readyState === 'complete') {
        cb();
      } else {
        window.addEventListener('load', cb);
      }
    }
  }, {
    key: "onReady",
    value: function onReady(cb) {
      if (document.readyState !== 'loading') {
        cb();
      } else {
        document.addEventListener('DOMContentLoaded', cb);
      }
    }
  }]);

  return TwigVisual;
}();

if (( false ? undefined : _typeof(exports)) === 'object') {
  module.exports = TwigVisual;
}

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi90cmFuc2xhdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vdHdpZ3Zpc3VhbC5qcyJdLCJuYW1lcyI6WyJ0d3ZfdHJhbnNsYXRpb25zIiwicmVxdWlyZSIsIlR3aWdWaXN1YWwiLCJnbG9iYWwiLCJtb2R1bGUiLCJleHBvcnRzIiwicnUiLCJvcHRpb25zIiwiY29udGFpbmVyIiwibG9hZGluZyIsInBhcmVudEVsZW1lbnQiLCJkYXRhS2V5IiwiZGF0YSIsImFjdGlvbnMiLCJ0aW1lciIsImNvbXBvbmVudHMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0ZW1wbGF0ZU5hbWUiLCJ0ZW1wbGF0ZXMiLCJwYWdlRmllbGRzIiwidWlPcHRpb25zIiwibG9jYWxlIiwidHJhbnNsYXRpb25zIiwid2luZG93Iiwic3RhdGUiLCJsaXN0ZW5lck9uTW91c2VPdmVyIiwib25Nb3VzZU92ZXIiLCJiaW5kIiwibGlzdGVuZXJPbk1vdXNlT3V0Iiwib25Nb3VzZU91dCIsImxpc3RlbmVyT25Nb3VzZVdoZWVsIiwib25Nb3VzZVdoZWVsIiwibGlzdGVuZXJPbk1vdXNlQ2xpY2siLCJvblNlbGVjdGVkRWxlbWVudENsaWNrIiwiY3VycmVudEVsZW1lbnRzIiwic2VsZWN0ZWRFbGVtZW50Iiwib25SZWFkeSIsImluaXQiLCJjcmVhdGVDb250YWluZXIiLCJidXR0b25TdGFydCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlU2VsZWN0aW9uSW5uZXIiLCJzZWxlY3RNb2RlVG9nZ2xlIiwiZG9jdW1lbnQiLCJib2R5IiwiYnV0dG9uQWRkVGhlbWUiLCJzZWxlY3Rpb25Nb2RlRGVzdHJveSIsImFkZE5ld1RoZW1lSW5pdCIsImFkZE5ld1RlbXBsYXRlSW5pdCIsImNvZGUiLCJzZWxlY3RlZEVsIiwic2VsZWN0TW9kZUFwcGx5IiwicGFuZWxDbGFzc05hbWUiLCJnZXRDb29raWUiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdHIiLCJvdXRwdXQiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInJlcGxhY2UiLCJwYXJlbnRFbCIsImhpZGVQYW5lbCIsInN0eWxlIiwiZGlzcGxheSIsInBhc3NpdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJidXR0b25FbCIsInJlbW92ZUF0dHJpYnV0ZSIsIm9uQWZ0ZXJTZWxlY3QiLCJpbm5lckNvbnRhaW5lckVsIiwibWFrZUJ1dHRvblNlbGVjdGVkIiwicmVtb3ZlT3ZlcmxheSIsImlubmVySFRNTCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJ0cmFucyIsImFwcGVuZENoaWxkIiwiYnV0dG9uU3VibWl0IiwiYnV0dG9uQ2FuY2VsIiwiaW5zZXJ0TW9kZSIsInZhbHVlIiwic2hvd0xvYWRpbmciLCJyZXF1ZXN0IiwieHBhdGgiLCJzb3VyY2UiLCJ4cGF0aFRhcmdldCIsIm1vdmVUYXJnZXQiLCJyZXMiLCJzdWNjZXNzIiwid2luZG93UmVsb2FkIiwiZXJyIiwiYWRkQWxlcnRNZXNzYWdlIiwiZXJyb3IiLCJnZXRYUGF0aEZvckVsZW1lbnQiLCJpbmRleE9mIiwidXBkYXRlWFBhdGhJbmZvIiwiZGlzcGxheVBhZGRpbmciLCJlbGVtZW50cyIsImVsZW1lbnQiLCJyZW1vdmUiLCJib3hTaGFkb3ciLCJzdG9wUHJvcGFnYXRpb24iLCJjdXJyZW50RWxlbWVudCIsImxlbmd0aCIsImN1cnJlbnRFbGVtZW50WHBhdGgiLCJyZW1vdmVTZWxlY3Rpb25Jbm5lckJ5WFBhdGgiLCJjcmVhdGVTZWxlY3Rpb25PcHRpb25zIiwiaGlnaGxpZ2h0RWxlbWVudCIsImluZGV4IiwiZmluZEluZGV4IiwiaXRlbSIsIm5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJkYXRhc2V0IiwidHd2VGl0bGUiLCJ0aXRsZSIsImNvbXBvbmVudEJ1dHRvbk1ha2VTZWxlY3RlZCIsInJlc2V0IiwicmVzZXREYXRhIiwicmVtb3ZlRWwiLCJwYXJlbnROb2RlIiwiZWxlbWVudFNlbGVjdGVkIiwiY29udGVudEVkaXRhYmxlIiwidHd2Q29udGVudCIsInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJzZXRUb1BhcmVudHMiLCJkZWx0YVkiLCJwdXNoIiwic3BsaWNlIiwic2VsZWN0ZWRFbGVtZW50cyIsImdldEVsZW1lbnRCeVhQYXRoIiwidGFyZ2V0Q2xhc3NOYW1lIiwidGFnTmFtZSIsImNvbXBTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwicG9zaXRpb24iLCJnZXRQcm9wZXJ0eVZhbHVlIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZE92ZXJsYXkiLCJpbnNlcnRCZWZvcmUiLCJnZXRBdHRyaWJ1dGVzIiwiaWQiLCJ0b0xvd2VyQ2FzZSIsIml4Iiwic2libGluZ3MiLCJjaGlsZE5vZGVzIiwiaSIsInNpYmxpbmciLCJnZXRYcGF0aEVsZW1lbnRBdHRyaWJ1dGVzIiwibm9kZVR5cGUiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwiaGFzQXR0cmlidXRlIiwicmVzdWx0IiwiZXZhbHVhdGUiLCJYUGF0aFJlc3VsdCIsIkZJUlNUX09SREVSRURfTk9ERV9UWVBFIiwic2luZ2xlTm9kZVZhbHVlIiwiY29udGFpbmVyRWwiLCJwYW5lbE1vdmUiLCJleGVjdXRlQWN0aW9uQmF0Y2giLCJyZXN0b3JlRnJvbVRlbXBsYXRlQ29weUEiLCJkaXJlY3Rpb24iLCJuZXdDbGFzc05hbWUiLCJjb250YWlucyIsInNldENvb2tpZSIsInR5cGVWYWx1ZSIsImNvbXBvbmVudHNDb250YWluZXIiLCJvcHRpb25zSFRNTCIsIm9wdCIsImNtcCIsImQiLCJ0eXBlIiwic3R5bGVOYW1lIiwiaHRtbCIsIm9wdGlvbiIsImNoZWNrZWQiLCJwYWdlRmllbGQiLCJvbkZpZWxkU2VsZWN0Q2hhbmdlIiwia2V5RmllbGRFbCIsInRleHRGaWVsZEJsb2NrRWwiLCJzZWxlY3RFbCIsInNlbGVjdGVkT3B0aW9uIiwic2VsZWN0ZWRJbmRleCIsInNldFRpbWVvdXQiLCJlbCIsImNoZWNrUmVxdWlyZWQiLCJvbkJsb2NrVWlUeXBlQ2hhbmdlIiwicmVxdWlyZWQiLCJhbGVydCIsImZpbHRlciIsInR3dktleSIsInNlbGVjdGVkIiwiY2FuY2VsRnVuYyIsInRleHRDb250ZW50IiwidHJpbSIsImluc2VydEFmdGVyIiwiRXJyb3IiLCJ4cGF0aEVzY2FwZWQiLCJlZGl0VGV4dENvbnRlbnRJbml0IiwiZWRpdExpbmtJbml0IiwicmVwbGFjZUltYWdlSW5pdCIsImRlbGV0ZUVsZW1lbnRJbml0IiwibW92ZUVsZW1lbnRJbml0IiwicmVzdG9yZVN0YXRpY0luaXQiLCJjbGVhck1lc3NhZ2UiLCJmb2N1cyIsImFkZFRvQWN0aW9uQmF0Y2giLCJocmVmIiwiZmlsZUZpZWxkIiwiaW1hZ2VQcmV2aWV3RWwiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiZmlsZXMiLCJyZWFkVVJMIiwiaW5wdXQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVhZEFzRGF0YVVSTCIsImNsaWNrIiwiZmllbGRUaGVtZUVsIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWVsZE1haW5wYWdlRWwiLCJ0aGVtZSIsIm1haW5wYWdlIiwibWVzc2FnZSIsInRlbXBsYXRlUGF0aCIsImZpbGVOYW1lIiwiZmllbGRGaWxlTmFtZUVsIiwiZmllbGRUZW1wbGF0ZU5hbWVFbCIsImFjdGlvbiIsImVuYWJsZWQiLCJjbGVhclRpbWVvdXQiLCJ1cmwiLCJzdWNjZXNzRm4iLCJmYWlsRm4iLCJtZXRob2QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJyZXNwb25zZVRleHQiLCJzdWJzdHIiLCJKU09OIiwicGFyc2UiLCJzdGF0dXMiLCJvbmVycm9yIiwic2V0UmVxdWVzdEhlYWRlciIsInN0cmluZ2lmeSIsInNlbmQiLCJsb2NhdGlvbkhyZWYiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwYXRobmFtZSIsInN0eWxlcyIsInJlbW92ZUNoaWxkIiwibmV3Tm9kZSIsInJlZmVyZW5jZU5vZGUiLCJuZXh0U2libGluZyIsImNvdW50IiwicHJldmlvdXNTaWJsaW5nIiwiZ2V0Tm9kZVByZXZpb3VzU2libGluZ0J5VHlwZSIsImNoYXJhY3RlcnMiLCJjaGFyYWN0ZXJzTGVuZ3RoIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY25hbWUiLCJjdmFsdWUiLCJleGRheXMiLCJEYXRlIiwic2V0VGltZSIsImdldFRpbWUiLCJleHBpcmVzIiwidG9VVENTdHJpbmciLCJjb29raWUiLCJkZWNvZGVkQ29va2llIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiY2EiLCJzcGxpdCIsImMiLCJzdWJzdHJpbmciLCJjYiIsInJlYWR5U3RhdGUiXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHlDQUF5QyxpQ0FBaUM7UUFDMUUsZ0hBQWdILG1CQUFtQixFQUFFO1FBQ3JJO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMkJBQTJCLDBCQUEwQixFQUFFO1FBQ3ZELGlDQUFpQyxlQUFlO1FBQ2hEO1FBQ0E7UUFDQTs7UUFFQTtRQUNBLHNEQUFzRCwr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QixFQUEwQjtBQUN0QixpQkFBTzRLLENBQUMsQ0FBQ0MsU0FBRixDQUFZN0ssSUFBSSxDQUFDUixNQUFqQixFQUF5Qm9MLENBQUMsQ0FBQ3BMLE1BQTNCLENBQVA7QUFDSDtBQUNKOztBQUNELGFBQU8sRUFBUDtBQUNIOzs7MkJBM3hEYXNMLEUsRUFBSTtBQUNkLFVBQUl6UCxRQUFRLENBQUMwUCxVQUFULEtBQXdCLFVBQTVCLEVBQXdDO0FBQ3BDRCxVQUFFO0FBQ0wsT0FGRCxNQUVPO0FBQ0hsUixjQUFNLENBQUNrQixnQkFBUCxDQUF3QixNQUF4QixFQUFnQ2dRLEVBQWhDO0FBQ0g7QUFDSjs7OzRCQUVjQSxFLEVBQUk7QUFDZixVQUFJelAsUUFBUSxDQUFDMFAsVUFBVCxLQUF3QixTQUE1QixFQUF1QztBQUNuQ0QsVUFBRTtBQUNMLE9BRkQsTUFFTztBQUNIelAsZ0JBQVEsQ0FBQ1AsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDZ1EsRUFBOUM7QUFDSDtBQUNKOzs7Ozs7QUFneERMLElBQUksOEJBQU9yUyxPQUFQLE9BQW1CLFFBQXZCLEVBQWlDO0FBQzdCRCxRQUFNLENBQUNDLE9BQVAsR0FBaUJILFVBQWpCO0FBQ0gsQyIsImZpbGUiOiJ0d2lndmlzdWFsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9pbmRleC5qc1wiKTtcbiIsIlxuY29uc3QgdHd2X3RyYW5zbGF0aW9ucyA9IHJlcXVpcmUoJy4vdHJhbnNsYXRpb25zLmpzJyk7XG5jb25zdCBUd2lnVmlzdWFsID0gcmVxdWlyZSgnLi90d2lndmlzdWFsLmpzJyk7XG5cbmdsb2JhbC50d3ZfdHJhbnNsYXRpb25zID0gdHd2X3RyYW5zbGF0aW9ucztcbmdsb2JhbC5Ud2lnVmlzdWFsID0gVHdpZ1Zpc3VhbDtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHJ1OiB7XG4gICAgICAgICdDcmVhdGUgbmV3IHRoZW1lJzogJ9Ch0L7Qt9C00LDRgtGMINC90L7QstGD0Y4g0YLQtdC80YMnLFxuICAgICAgICAnQ3JlYXRlIG5ldyB0ZW1wbGF0ZSc6ICfQodC+0LfQtNCw0YLRjCDRiNCw0LHQu9C+0L0nLFxuICAgICAgICAnSW50ZXJmYWNlIGl0ZW0nOiAn0K3Qu9C10LzQtdC90YIg0LjQvdGC0LXRgNGE0LXQudGB0LAnLFxuICAgICAgICAnVW5kbyB0aGUgbGFzdCBhY3Rpb24nOiAn0J7RgtC80LXQvdC40YLRjCDQv9C+0YHQu9C10LTQvdC10LUg0LTQtdC50YHRgtCy0LjQtScsXG4gICAgICAgICdFeGVjdXRlIGJhdGNoIG9mIG9wZXJhdGlvbnMnOiAn0JLRi9C/0L7Qu9C90LjRgtGMINC/0LDQutC10YIg0L7Qv9C10YDQsNGG0LjQuScsXG4gICAgICAgICdNb3ZlIGxlZnQnOiAn0J/QtdGA0LXQtNCy0LjQvdGD0YLRjCDQstC70LXQstC+JyxcbiAgICAgICAgJ01vdmUgcmlnaHQnOiAn0J/QtdGA0LXQtNCy0LjQvdGD0YLRjCDQstC/0YDQsNCy0L4nLFxuICAgICAgICAnQXBwbHknOiAn0J/RgNC40LzQtdC90LjRgtGMJyxcbiAgICAgICAgJ0NhbmNlbCc6ICfQntGC0LzQtdC90LjRgtGMJyxcbiAgICAgICAgJ1RoZSBcInt0aXRsZX1cIiBmaWVsZCBpcyByZXF1aXJlZC4nOiAn0J/QvtC70LUgXCJ7dGl0bGV9XCIg0L7QsdGP0LfQsNGC0LXQu9GM0L3Qvi4nLFxuICAgICAgICAnSW5zZXJ0JzogJ9CS0YHRgtCw0LLQuNGC0YwnLFxuICAgICAgICAnSW5zZXJ0IGJlZm9yZSc6ICfQktGB0YLQsNCy0LjRgtGMINC00L4nLFxuICAgICAgICAnSW5zZXJ0IGFmdGVyJzogJ9CS0YHRgtCw0LLQuNGC0Ywg0L/QvtGB0LvQtScsXG4gICAgICAgICdTZWxlY3RlZCc6ICfQktGL0LHRgNCw0L3QvicsXG4gICAgICAgICdFZGl0IHRleHQgY29udGVudCc6ICfQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQutC+0L3RgtC10L3RgicsXG4gICAgICAgICdFZGl0IGxpbmsnOiAn0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0YHRgdGL0LvQutGDJyxcbiAgICAgICAgJ1JlcGxhY2UgaW1hZ2UnOiAn0JfQsNC80LXQvdC40YLRjCDQutCw0YDRgtC40L3QutGDJyxcbiAgICAgICAgJ0RlbGV0ZSBlbGVtZW50JzogJ9Cj0LTQsNC70LjRgtGMINGN0LvQtdC80LXQvdGCJyxcbiAgICAgICAgJ01vdmUgZWxlbWVudCc6ICfQn9C10YDQtdC80LXRgdGC0LjRgtGMINGN0LvQtdC80LXQvdGCJyxcbiAgICAgICAgJ1Jlc3RvcmUgc3RhdGljJzogJ9CS0L7RgdGB0YLQsNC90L7QstC40YLRjCDRgdGC0LDRgtC40YfQvdC+0LUg0YHQvtC00LXRgNC20LjQvNC+0LUnLFxuICAgICAgICAnSW50ZXJmYWNlIGl0ZW0gdHlwZSc6ICfQotC40L8g0LHQu9C+0LrQsCDQuNC90YLQtdGA0YTQtdC50YHQsCcsXG4gICAgICAgICdTYXZlJzogJ9Ch0L7RhdGA0LDQvdC40YLRjCcsXG4gICAgICAgICdBZGQgdG8gb3BlcmF0aW9ucyBsaXN0JzogJ9CU0L7QsdCw0LLQuNGC0Ywg0LIg0YHQv9C40YHQvtC6INC+0L/QtdGA0LDRhtC40LknLFxuICAgICAgICAnVVJMJzogJ9Ch0YHRi9C70LrQsCcsXG4gICAgICAgICdPcGVuIGluJzogJ9Ce0YLQutGA0YvRgtGMINCyJyxcbiAgICAgICAgJ3RoZSBjdXJyZW50IHRhYic6ICfRgtC10LrRg9GJ0LXQuSDQstC60LvQsNC00LrQtScsXG4gICAgICAgICdhIG5ldyB0YWInOiAn0L3QvtCy0L7QuSDQstC60LvQsNC00LrQtScsXG4gICAgICAgICdDb25maXJtJzogJ9Cf0L7QtNGC0LLQtdGA0LTQuNGC0YwnLFxuICAgICAgICAnQ3JlYXRlJzogJ9Ch0L7Qt9C00LDRgtGMJyxcbiAgICAgICAgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXR1cm4gdGhlIGl0ZW0gdG8gaXRzIG9yaWdpbmFsIHN0YXRlPyc6ICfQktGLINGD0LLQtdGA0LXQvdGLLCDRh9GC0L4g0YXQvtGC0LjRgtC1INCy0LXRgNC90YPRgtGMINC40YHRhdC+0LTQvdC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1INGN0LvQtdC80LXQvdGC0LA/JyxcbiAgICAgICAgJ1RoZW1lIG5hbWUnOiAn0J3QsNC30LLQsNC90LjQtSDRgtC10LzRiycsXG4gICAgICAgICdIVE1MLWZpbGUgb2YgdGhlIG1haW4gcGFnZSc6ICdIVE1MLdGE0LDQudC7INCz0LvQsNCy0L3QvtC5INGB0YLRgNCw0L3QuNGG0YsnLFxuICAgICAgICAnVGVtcGxhdGUgbmFtZSc6ICfQndCw0LfQstCw0L3QuNC1INGI0LDQsdC70L7QvdCwJyxcbiAgICAgICAgJ0hUTUwtZmlsZSc6ICdIVE1MLdGE0LDQudC7JyxcbiAgICAgICAgJ1RoZSBzZWxlY3RlZCBpdGVtIG11c3QgaGF2ZSB0YWcge3RhZ05hbWV9Lic6ICfQktGL0LHRgNCw0L3QvdGL0Lkg0Y3Qu9C10LzQtdC90YIg0LTQvtC70LbQtdC9INC40LzQtdGC0Ywg0YLQtdCzIHt0YWdOYW1lfS4nXG4gICAgfVxufTtcbiIsIi8qKlxuICogVHdpZ1Zpc3VhbFxuICogQHZlcnNpb24gMS4wLjBcbiAqIEBhdXRob3IgQW5kY2hpcjxhbmRjaGlyQGdtYWlsLmNvbT5cbiAqL1xuY2xhc3MgVHdpZ1Zpc3VhbCB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuZGF0YUtleSA9ICdzb3VyY2UnO1xuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XG4gICAgICAgIHRoaXMudGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6ICcnLFxuICAgICAgICAgICAgdGVtcGxhdGVzOiBbXSxcbiAgICAgICAgICAgIHBhZ2VGaWVsZHM6IFtdLFxuICAgICAgICAgICAgdWlPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIGxvY2FsZTogJ2VuJ1xuICAgICAgICB9LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGlvbnMgPSB3aW5kb3cudHd2X3RyYW5zbGF0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdpbmFjdGl2ZSc7XG4gICAgICAgIHRoaXMubGlzdGVuZXJPbk1vdXNlT3ZlciA9IHRoaXMub25Nb3VzZU92ZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lck9uTW91c2VPdXQgPSB0aGlzLm9uTW91c2VPdXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lck9uTW91c2VXaGVlbCA9IHRoaXMub25Nb3VzZVdoZWVsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJPbk1vdXNlQ2xpY2sgPSB0aGlzLm9uU2VsZWN0ZWRFbGVtZW50Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEVsZW1lbnQgPSBudWxsO1xuXG4gICAgICAgIFR3aWdWaXN1YWwub25SZWFkeSh0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG9uTG9hZChjYikge1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2IpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHN0YXRpYyBvblJlYWR5KGNiKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2IpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5jcmVhdGVDb250YWluZXIoKTtcblxuICAgICAgICAvLyBTdGFydCBidXR0b25cbiAgICAgICAgY29uc3QgYnV0dG9uU3RhcnQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdGFydC1zZWxlY3QnKTtcbiAgICAgICAgYnV0dG9uU3RhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3Rpb25Jbm5lcigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb2RlVG9nZ2xlKGRvY3VtZW50LmJvZHksICdzb3VyY2UnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIG5ldyB0aGVtZVxuICAgICAgICBjb25zdCBidXR0b25BZGRUaGVtZSA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLW5ldy10aGVtZScpO1xuICAgICAgICBidXR0b25BZGRUaGVtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vZGVUb2dnbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZE5ld1RoZW1lSW5pdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLW5ldy10ZW1wbGF0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9kZVRvZ2dsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlRGVzdHJveSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3VGVtcGxhdGVJbml0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb2RlVG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50d3Ytc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb2RlQXBwbHkoc2VsZWN0ZWRFbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBhbmVsIHBvc2l0aW9uIHJlY292ZXJ5XG4gICAgICAgIGNvbnN0IHBhbmVsQ2xhc3NOYW1lID0gdGhpcy5nZXRDb29raWUoJ3R3di1wYW5lbC1jbGFzcy1uYW1lJyk7XG4gICAgICAgIGlmIChwYW5lbENsYXNzTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gcGFuZWxDbGFzc05hbWU7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0d2lnLXZpc3VhbC1jb250YWluZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0cmFucyhzdHIsIGRhdGEgPSB7fSkge1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNsYXRpb25zW3RoaXMub3B0aW9ucy5sb2NhbGVdKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBzdHI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQgPSB0aGlzLnRyYW5zbGF0aW9uc1t0aGlzLm9wdGlvbnMubG9jYWxlXVtzdHJdIHx8IHN0cjtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKGB7JHtrZXl9fWAsIGRhdGFba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIHNlbGVjdE1vZGVUb2dnbGUocGFyZW50RWwsIGRhdGFLZXkgPSAnc291cmNlJywgaGlkZVBhbmVsID0gdHJ1ZSkge1xuICAgICAgICBwYXJlbnRFbCA9IHBhcmVudEVsIHx8IHRoaXMucGFyZW50RWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdpbmFjdGl2ZScpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsO1xuICAgICAgICAgICAgdGhpcy5kYXRhS2V5ID0gZGF0YUtleTtcbiAgICAgICAgICAgIGlmIChoaWRlUGFuZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5saXN0ZW5lck9uTW91c2VPdmVyKTtcbiAgICAgICAgICAgIHBhcmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5saXN0ZW5lck9uTW91c2VPdXQpO1xuICAgICAgICAgICAgcGFyZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLmxpc3RlbmVyT25Nb3VzZVdoZWVsLCB7cGFzc2l2ZTogZmFsc2V9KTtcbiAgICAgICAgICAgIHBhcmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5saXN0ZW5lck9uTW91c2VDbGljayk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gJ2FjdGl2ZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBhcmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMubGlzdGVuZXJPbk1vdXNlT3Zlcik7XG4gICAgICAgICAgICBwYXJlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMubGlzdGVuZXJPbk1vdXNlT3V0KTtcbiAgICAgICAgICAgIHBhcmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5saXN0ZW5lck9uTW91c2VXaGVlbCk7XG4gICAgICAgICAgICBwYXJlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubGlzdGVuZXJPbk1vdXNlQ2xpY2spO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgYXR0cmlidXRlIGRpc2FibGVkXG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJykucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShidXR0b25zKS5mb3JFYWNoKChidXR0b25FbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25FbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBidXR0b25TdGFydCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLXN0YXJ0LXNlbGVjdCcpO1xuICAgICAgICAgICAgYnV0dG9uU3RhcnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIHRoaXMub25BZnRlclNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25BZnRlclNlbGVjdCgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmRhdGFLZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ21vdmVUYXJnZXQnOlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWlubmVyJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uU3RhcnQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdGFydC1zZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VCdXR0b25TZWxlY3RlZChidXR0b25TdGFydCwgdHJ1ZSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZGVEZXN0cm95KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU92ZXJsYXkoKTtcbiAgICAgICAgICAgICAgICBpbm5lckNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICd0d3YtcHQtMSB0d3YtbWItMyc7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0d3YtZGlzcGxheS1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiaW5zZXJ0TW9kZVwiIHZhbHVlPVwiaW5zaWRlXCIgY2hlY2tlZD1cImNoZWNrZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMudHJhbnMoJ0luc2VydCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInR3di1kaXNwbGF5LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJpbnNlcnRNb2RlXCIgdmFsdWU9XCJiZWZvcmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMudHJhbnMoJ0luc2VydCBiZWZvcmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0d3YtZGlzcGxheS1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiaW5zZXJ0TW9kZVwiIHZhbHVlPVwiYWZ0ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMudHJhbnMoJ0luc2VydCBhZnRlcicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuLXByaW1hcnkgdHd2LW1yLTEgdHd2LWJ1dHRvbi1zdWJtaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tZG9uZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnQXBwbHknKX1cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1idXR0b24tY2FuY2VsXCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0NhbmNlbCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jbGVhcmNsb3NlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIGlubmVyQ29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGlubmVyQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tc3VibWl0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uQ2FuY2VsID0gaW5uZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1jYW5jZWwnKTtcblxuICAgICAgICAgICAgICAgIC8vIFN1Ym1pdCBkYXRhXG4gICAgICAgICAgICAgICAgYnV0dG9uU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zZXJ0TW9kZSA9IGlubmVyQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImluc2VydE1vZGVcIl06Y2hlY2tlZCcpLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCgnL3R3aWd2aXN1YWwvbW92ZV9lbGVtZW50Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm9wdGlvbnMudGVtcGxhdGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgeHBhdGg6IHRoaXMuZGF0YS5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB4cGF0aFRhcmdldDogdGhpcy5kYXRhLm1vdmVUYXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRNb2RlXG4gICAgICAgICAgICAgICAgICAgIH0sIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2luZG93UmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShlcnIuZXJyb3IgfHwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9LCAnUE9TVCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU3VibWl0IGRhdGFcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGFpbmVyRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk1vdXNlT3ZlcihlKSB7XG4gICAgICAgIGNvbnN0IHhwYXRoID0gdGhpcy5nZXRYUGF0aEZvckVsZW1lbnQoZS50YXJnZXQsIHRydWUpO1xuICAgICAgICBpZiAoIXhwYXRoIHx8IHRoaXMuZ2V0WFBhdGhGb3JFbGVtZW50KGUudGFyZ2V0LCB0cnVlKS5pbmRleE9mKCd0d2lnLXZpc3VhbC1jb250YWluZXInKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy51cGRhdGVYUGF0aEluZm8oZS50YXJnZXQpO1xuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCd0d3Ytc2VsZWN0ZWQnKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5UGFkZGluZyhlLnRhcmdldCk7XG4gICAgfVxuXG4gICAgb25Nb3VzZU91dChlKSB7XG4gICAgICAgIGNvbnN0IHhwYXRoID0gdGhpcy5nZXRYUGF0aEZvckVsZW1lbnQoZS50YXJnZXQsIHRydWUpO1xuICAgICAgICBpZiAoIXhwYXRoIHx8IHRoaXMuZ2V0WFBhdGhGb3JFbGVtZW50KGUudGFyZ2V0LCB0cnVlKS5pbmRleE9mKCd0d2lnLXZpc3VhbC1jb250YWluZXInKSA+IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudHMgPSBbXTtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50d3Ytc2VsZWN0ZWQnKSk7XG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHd2LXNlbGVjdGVkJyk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblNlbGVjdGVkRWxlbWVudENsaWNrKGUpIHtcbiAgICAgICAgY29uc3QgeHBhdGggPSB0aGlzLmdldFhQYXRoRm9yRWxlbWVudChlLnRhcmdldCwgdHJ1ZSk7XG4gICAgICAgIGlmICgheHBhdGggfHwgdGhpcy5nZXRYUGF0aEZvckVsZW1lbnQoZS50YXJnZXQsIHRydWUpLmluZGV4T2YoJ3R3aWctdmlzdWFsLWNvbnRhaW5lcicpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5zZWxlY3RNb2RlQXBwbHkoZS50YXJnZXQpO1xuICAgIH1cbiAgICBcbiAgICBzZWxlY3RNb2RlQXBwbHkoZWxlbWVudCA9IG51bGwpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRFbGVtZW50ID0gdGhpcy5jdXJyZW50RWxlbWVudHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0aGlzLmN1cnJlbnRFbGVtZW50c1t0aGlzLmN1cnJlbnRFbGVtZW50cy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgOiBlbGVtZW50O1xuICAgICAgICBpZiAoIWN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVPdmVybGF5KCk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnRYcGF0aCA9IHRoaXMuZ2V0WFBhdGhGb3JFbGVtZW50KGN1cnJlbnRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5kYXRhW3RoaXMuZGF0YUtleV0gPSBjdXJyZW50RWxlbWVudFhwYXRoO1xuXG4gICAgICAgIC8vIENsZWFyIHNlbGVjdGlvblxuICAgICAgICBpZiAodGhpcy5kYXRhW3RoaXMuZGF0YUtleV0pIHtcbiAgICAgICAgICAgIGNvbnN0IHhwYXRoID0gdGhpcy5kYXRhW3RoaXMuZGF0YUtleV07XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGlvbklubmVyQnlYUGF0aCh4cGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9kZVRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3koKTtcblxuICAgICAgICBpZiAodGhpcy5kYXRhS2V5ID09PSAnc291cmNlJykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNlbGVjdGlvbk9wdGlvbnMoY3VycmVudEVsZW1lbnRYcGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0RWxlbWVudCgpO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndHd2LXNlbGVjdGVkLXN1Y2Nlc3MnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNvbXBvbmVudHMuZmluZEluZGV4KChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdGhpcy5kYXRhS2V5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgJiYgIWN1cnJlbnRFbGVtZW50LmRhdGFzZXQudHd2VGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuZGF0YXNldC50d3ZUaXRsZSA9IGN1cnJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsIHRoaXMuY29tcG9uZW50c1tpbmRleF0udGl0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRCdXR0b25NYWtlU2VsZWN0ZWQodGhpcy5kYXRhS2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgc2VsZWN0aW9uIG1vZGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlc2V0XG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXNldERhdGFcbiAgICAgKi9cbiAgICBzZWxlY3Rpb25Nb2RlRGVzdHJveShyZXNldCA9IGZhbHNlLCByZXNldERhdGEgPSB0cnVlKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHd2LWluZm8nKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHd2LWluZm8nKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50d3Ytc2VsZWN0ZWQnKSk7XG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHd2LXNlbGVjdGVkJyk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICcnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldERhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvblN0YXJ0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tc3RhcnQtc2VsZWN0Jyk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBvcHRpb25zXG4gICAgICAgICAgICBidXR0b25TdGFydC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3R3di1ibG9jay1hY3RpdmUtc3RhdHVzLWFjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1pbm5lcicpLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICB0aGlzLnJlbW92ZU92ZXJsYXkoKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHNlbGVjdGlvbiBvZiBwYXJlbnQgZWxlbWVudFxuICAgICAgICAgICAgY29uc3QgZWxlbWVudFNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR3di1zZWxlY3RlZC1lbGVtZW50Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudFNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudFNlbGVjdGVkLmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50U2VsZWN0ZWQuZGF0YXNldC50d3ZDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5pbm5lckhUTUwgPSBlbGVtZW50U2VsZWN0ZWQuZGF0YXNldC50d3ZDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50U2VsZWN0ZWQuZGF0YXNldC50d3ZDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKCd0d3Ytc2VsZWN0ZWQtZWxlbWVudCcpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgICAgICBlbGVtZW50U2VsZWN0ZWQuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VG9QYXJlbnRzKGVsZW1lbnRTZWxlY3RlZCwge3RyYW5zZm9ybTogJycsIHRyYW5zaXRpb246ICcnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0aW9uSW5uZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VXaGVlbChlKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFhQYXRoRm9yRWxlbWVudChlLnRhcmdldCkuaW5kZXhPZigndHdpZy12aXN1YWwtY29udGFpbmVyJykgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGN1cnJlbnRFbGVtZW50ID0gdGhpcy5jdXJyZW50RWxlbWVudHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0aGlzLmN1cnJlbnRFbGVtZW50c1t0aGlzLmN1cnJlbnRFbGVtZW50cy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgOiBlLnRhcmdldDtcbiAgICAgICAgaWYgKGUuZGVsdGFZIDwgMCkge1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndHd2LXNlbGVjdGVkJyk7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudC5zdHlsZS5ib3hTaGFkb3cgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnRzLnB1c2goY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZSk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlWFBhdGhJbmZvKGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCd0d3Ytc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVBhZGRpbmcoY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd0d3Ytc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudHMuc3BsaWNlKHRoaXMuY3VycmVudEVsZW1lbnRzLmxlbmd0aCAtIDEsIDEpO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSB0aGlzLmN1cnJlbnRFbGVtZW50cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyB0aGlzLmN1cnJlbnRFbGVtZW50c1t0aGlzLmN1cnJlbnRFbGVtZW50cy5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAgIDogZS50YXJnZXQ7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlWFBhdGhJbmZvKGN1cnJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3R3di1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5UGFkZGluZyhjdXJyZW50RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgc2VsZWN0aW9uIG9mIGlubmVyIGVsZW1lbnRzXG4gICAgICovXG4gICAgcmVtb3ZlU2VsZWN0aW9uSW5uZXIoKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50d3Ytc2VsZWN0ZWQtc3VjY2VzcycpKTtcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnR3dlRpdGxlKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgZWxlbWVudC5kYXRhc2V0LnR3dlRpdGxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3R3di1zZWxlY3RlZC1zdWNjZXNzJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBzZWxlY3Rpb24gYnkgWFBhdGhcbiAgICAgKiBAcGFyYW0geHBhdGhcbiAgICAgKi9cbiAgICByZW1vdmVTZWxlY3Rpb25Jbm5lckJ5WFBhdGgoeHBhdGgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVPdmVybGF5KCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnRCeVhQYXRoKHhwYXRoKTtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaWdobGlnaHRFbGVtZW50KCk7XG4gICAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQudHd2VGl0bGUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsIGVsZW1lbnQuZGF0YXNldC50d3ZUaXRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3R3di1zZWxlY3RlZC1zdWNjZXNzJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBvdmVybGF5IGZvciBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2xhc3NOYW1lXG4gICAgICovXG4gICAgaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50ID0gbnVsbCwgdGFyZ2V0Q2xhc3NOYW1lID0gJ3R3di1zZWxlY3RlZC1lbGVtZW50Jykge1xuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50d3YtYmFjay1vdmVybGF5JykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGFyZ2V0Q2xhc3NOYW1lKTtcbiAgICAgICAgY29uc3QgY29tcFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNvbXBTdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgncG9zaXRpb24nKTtcbiAgICAgICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gY29tcFN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChbJ3JnYmEoMCwgMCwgMCwgMCknLCAndHJhbnNwYXJlbnQnXS5pbmRleE9mKGJhY2tncm91bmRDb2xvcikgPiAtMSkge1xuICAgICAgICAgICAgLy8gZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZic7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnbm9uZSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgICAgdGhpcy5zZXRUb1BhcmVudHMoZWxlbWVudCwge3RyYW5zZm9ybTogJ25vbmUnLCB0cmFuc2l0aW9uOiAnbm9uZSd9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJhY2tncm91bmRPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50LnRhZ05hbWUgPT09ICdMSScgPyAnbGknIDogJ2RpdicpO1xuICAgICAgICBiYWNrZ3JvdW5kT3ZlcmxheS5jbGFzc05hbWUgPSAndHd2LWJhY2stb3ZlcmxheSc7XG4gICAgICAgIHRoaXMuaW5zZXJ0QmVmb3JlKGJhY2tncm91bmRPdmVybGF5LCBlbGVtZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgb3ZlcmxheVxuICAgICAqL1xuICAgIHJlbW92ZU92ZXJsYXkoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHd2LWJhY2stb3ZlcmxheScpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUVsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50d3YtYmFjay1vdmVybGF5JykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlWFBhdGhJbmZvKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgeHBhdGggPSB0aGlzLmdldFhQYXRoRm9yRWxlbWVudChlbGVtZW50LCB0cnVlKTtcbiAgICAgICAgaWYgKHhwYXRoLmluZGV4T2YoJ3R3aWctdmlzdWFsLWNvbnRhaW5lcicpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR3di1pbmZvJyk7XG4gICAgICAgIGlmICghZGl2KSB7XG4gICAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAndHd2LWluZm8gc21hbGwnO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9XG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGA8ZGl2PiR7eHBhdGh9PC9kaXY+YDtcbiAgICB9XG5cbiAgICBnZXRYUGF0aEZvckVsZW1lbnQoZWxlbWVudCwgZ2V0QXR0cmlidXRlcyA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChlbGVtZW50LmlkICE9PSAnJylcbiAgICAgICAgICAgIHJldHVybiAnaWQoXCInICsgZWxlbWVudC5pZCArICdcIiknO1xuICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnSFRNTCcpXG4gICAgICAgICAgICByZXR1cm4gKCcvSFRNTFsxXScpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KVxuICAgICAgICAgICAgcmV0dXJuICgnL0hUTUxbMV0vQk9EWVsxXScpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICghZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuXG4gICAgICAgIGxldCBpeCA9IDA7XG4gICAgICAgIGNvbnN0IHNpYmxpbmdzID0gZWxlbWVudC5wYXJlbnROb2RlLmNoaWxkTm9kZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2libGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNpYmxpbmcgPSBzaWJsaW5nc1tpXTtcbiAgICAgICAgICAgIGlmIChzaWJsaW5nID09PSBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0WFBhdGhGb3JFbGVtZW50KGVsZW1lbnQucGFyZW50Tm9kZSwgZ2V0QXR0cmlidXRlcykgKyAnLydcbiAgICAgICAgICAgICAgICAgICAgKyBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICdbJyArIChpeCArIDEpICsgJ10nXG4gICAgICAgICAgICAgICAgICAgICsgKGdldEF0dHJpYnV0ZXMgPyB0aGlzLmdldFhwYXRoRWxlbWVudEF0dHJpYnV0ZXMoZWxlbWVudCkgOiAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2libGluZy5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgc2libGluZy50YWdOYW1lID09PSBlbGVtZW50LnRhZ05hbWUpXG4gICAgICAgICAgICAgICAgaXgrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFhwYXRoRWxlbWVudEF0dHJpYnV0ZXMoZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgIHJldHVybiBgaWQoXCIke2VsZW1lbnQuaWR9XCIpYDtcbiAgICAgICAgfSBlbHNlIGlmKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjbGFzcycpICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpKSB7XG4gICAgICAgICAgICByZXR1cm4gYFtAY2xhc3M9XCIke2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpfVwiXWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICAnJztcbiAgICB9XG5cbiAgICBnZXRFbGVtZW50QnlYUGF0aCh4cGF0aCwgcGFyZW50RWwgPSB3aW5kb3cuZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuZXZhbHVhdGUoeHBhdGgsIHBhcmVudEVsLCBudWxsLCBYUGF0aFJlc3VsdC5GSVJTVF9PUkRFUkVEX05PREVfVFlQRSwgbnVsbCk7XG4gICAgICAgIHJldHVybiByZXN1bHQuc2luZ2xlTm9kZVZhbHVlO1xuICAgIH1cblxuICAgIGNyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyRWwuaWQgPSAndHdpZy12aXN1YWwtY29udGFpbmVyJztcbiAgICAgICAgY29udGFpbmVyRWwuY2xhc3NOYW1lID0gJ3R3aWctdmlzdWFsLWNvbnRhaW5lciB0d3YtcGFuZWwtcmlnaHQnO1xuICAgICAgICBjb250YWluZXJFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtcGFuZWwtaGVhZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LXBhbmVsLWhlYWRlci1idXR0b25zXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1zbSB0d3YtbWwtMSB0d3YtYnV0dG9uLXVuZG9cIiB0eXBlPVwiYnV0dG9uXCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ1VuZG8gdGhlIGxhc3QgYWN0aW9uJyl9XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tdW5kb1wiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuLXNtIHR3di1tbC0xIHR3di1idXR0b24tZXhlY3V0ZS1iYXRjaFwiIHR5cGU9XCJidXR0b25cIiB0aXRsZT1cIiR7dGhpcy50cmFucygnRXhlY3V0ZSBiYXRjaCBvZiBvcGVyYXRpb25zJyl9XCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWZvcm1hdF9saXN0X2J1bGxldGVkXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4tc20gdHd2LW1yLTEgdHd2LWJ1dHRvbi1wYW5lbC1sZWZ0XCIgdHlwZT1cImJ1dHRvblwiIHRpdGxlPVwiJHt0aGlzLnRyYW5zKCdNb3ZlIGxlZnQnKX1cIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWFycm93X2JhY2tcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4tc20gdHd2LWJ1dHRvbi1wYW5lbC1yaWdodFwiIHR5cGU9XCJidXR0b25cIiB0aXRsZT1cIiR7dGhpcy50cmFucygnTW92ZSByaWdodCcpfVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tYXJyb3dfZm9yd2FyZFwiPjwvaT5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0yXCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1ibG9jayB0d3YtYnV0dG9uLW5ldy10aGVtZVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tYWRkXCI+PC9pPlxuICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnQ3JlYXRlIG5ldyB0aGVtZScpfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTJcIj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuLWJsb2NrIHR3di1idXR0b24tbmV3LXRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1hZGRcIj48L2k+XG4gICAgICAgICAgICAgICAgJHt0aGlzLnRyYW5zKCdDcmVhdGUgbmV3IHRlbXBsYXRlJyl9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4tcHJpbWFyeSB0d3YtYnRuLWJsb2NrIHR3di1idXR0b24tc3RhcnQtc2VsZWN0XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jZW50ZXJfZm9jdXNfc3Ryb25nXCI+PC9pPlxuICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnSW50ZXJmYWNlIGl0ZW0nKX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3di1pbm5lci13cmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LWlubmVyXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgICBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1wYW5lbC1sZWZ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5wYW5lbE1vdmUoJ2xlZnQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tcGFuZWwtcmlnaHQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnBhbmVsTW92ZSgncmlnaHQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1leGVjdXRlLWJhdGNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlQWN0aW9uQmF0Y2goKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tdW5kbycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUZyb21UZW1wbGF0ZUNvcHlBKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXJFbDtcbiAgICB9XG5cbiAgICBwYW5lbE1vdmUoZGlyZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IG5ld0NsYXNzTmFtZSA9IGB0d3YtcGFuZWwtJHtkaXJlY3Rpb259YDtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhuZXdDbGFzc05hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0d3YtcGFuZWwtaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLnNldENvb2tpZSgndHd2LXBhbmVsLWNsYXNzLW5hbWUnLCB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygndHd2LXBhbmVsLWhpZGRlbicpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCd0d3YtcGFuZWwtaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLnNldENvb2tpZSgndHd2LXBhbmVsLWNsYXNzLW5hbWUnLCB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3R3di1wYW5lbC0nICsgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gJ3JpZ2h0JyA6ICdsZWZ0JykpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuc2V0Q29va2llKCd0d3YtcGFuZWwtY2xhc3MtbmFtZScsIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGJsb2NrIHR5cGVcbiAgICAgKiBAcGFyYW0gcGFyZW50RWxlbWVudFxuICAgICAqIEBwYXJhbSB0eXBlVmFsdWVcbiAgICAgKi9cbiAgICBvbkJsb2NrVWlUeXBlQ2hhbmdlKHBhcmVudEVsZW1lbnQsIHR5cGVWYWx1ZSkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJyk7XG4gICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0aW9uSW5uZXIoKTtcblxuICAgICAgICBpZiAoIXR5cGVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnVpT3B0aW9uc1t0eXBlVmFsdWVdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhbiBjb21wb25lbnRzIGRhdGFcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgIT09ICdzb3VyY2UnKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxldCBvcHRpb25zSFRNTCA9ICcnO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3R3di1wdC0xIHR3di1tYi0zJztcbiAgICAgICAgY29uc3Qgb3B0ID0gdGhpcy5vcHRpb25zLnVpT3B0aW9uc1t0eXBlVmFsdWVdO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBvcHQuY29tcG9uZW50cztcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goKGNtcCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkLmNsYXNzTmFtZSA9ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKGNtcC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWxlbWVudFNlbGVjdCc6XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwidHd2LW1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS10d3Yta2V5PVwiJHtjbXAubmFtZX1cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1ibG9jayB0d3YtdGV4dC1vdmVyZmxvd1wiPiR7Y21wLnRpdGxlfTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgICAgICAgICBkLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9kZVRvZ2dsZShwYXJlbnRFbGVtZW50LCBjbXAubmFtZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcC5zdHlsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBTdHlsZXNbY21wLnN0eWxlTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbXBTdHlsZXNbY21wLnN0eWxlTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInR3di1kaXNwbGF5LWJsb2NrIHR3di1tYi0xXCIgZm9yPVwidHd3LWZpZWxkLW9wdGlvbi0ke2NtcC5uYW1lfVwiPiR7Y21wLnRpdGxlfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInR3dy1maWVsZC1vcHRpb24tJHtjbXAubmFtZX1cIiBjbGFzcz1cInR3di1mb3JtLWNvbnRyb2xcIiBuYW1lPVwiJHtjbXAubmFtZX1cIiB2YWx1ZT1cIiR7dmFsdWV9XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG5cbiAgICAgICAgICAgICAgICAgICAgZC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwidHd3LWZpZWxkLW9wdGlvbi0ke2NtcC5uYW1lfVwiIG5hbWU9XCIke2NtcC5uYW1lfVwiIHZhbHVlPVwiMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwidHd2LWRpc3BsYXktaW5saW5lIHR3di1zbWFsbCB0d3YtbWwtMVwiIGZvcj1cInR3dy1maWVsZC1vcHRpb24tJHtjbXAubmFtZX1cIj4ke2NtcC50aXRsZX08L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcC50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInR3di1tYi0yXCI+JHtjbXAudGl0bGV9PC9kaXY+YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY21wLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtcC5vcHRpb25zLmZvckVhY2goKG9wdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0d3YtZGlzcGxheS1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cIiR7Y21wLm5hbWV9XCIgdmFsdWU9XCIke29wdGlvbi52YWx1ZX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLnRyYW5zKG9wdGlvbi50aXRsZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgICAgICAgICBkLmNsYXNzTmFtZSA9ICd0d3YtbWItMyc7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChkKTtcbiAgICAgICAgICAgICAgICAgICAgZC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGFnZUZpZWxkJzpcblxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zSFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucGFnZUZpZWxkcy5mb3JFYWNoKChwYWdlRmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHtwYWdlRmllbGQubmFtZX1cIiBkYXRhLXR5cGU9XCIke3BhZ2VGaWVsZC50eXBlfVwiPiR7cGFnZUZpZWxkLm5hbWV9IC0gJHtwYWdlRmllbGQudHlwZX08L29wdGlvbj5gO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInR3di1kaXNwbGF5LWJsb2NrIHR3di1tYi0xXCIgZm9yPVwidHd3LWZpZWxkLW9wdGlvbi0ke2NtcC5uYW1lfVwiPiR7Y21wLnRpdGxlfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwidHd3LWZpZWxkLW9wdGlvbi0ke2NtcC50eXBlfVwiIGNsYXNzPVwidHd2LWN1c3RvbS1zZWxlY3RcIiBuYW1lPVwiZmllbGROYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtvcHRpb25zSFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb25GaWVsZFNlbGVjdENoYW5nZSA9ICh2YWx1ZSwgdHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5RmllbGRFbCA9IGNvbXBvbmVudHNDb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImtleVwiXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleUZpZWxkRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RmllbGRCbG9ja0VsID0ga2V5RmllbGRFbC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRGaWVsZEJsb2NrRWwuc3R5bGUuZGlzcGxheSA9IFsnb2JqZWN0JywgJ2FycmF5J10uaW5kZXhPZih0eXBlKSA+IC0xID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWydvYmplY3QnLCAnYXJyYXknXS5pbmRleE9mKHR5cGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlGaWVsZEVsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGQucXVlcnlTZWxlY3Rvcignc2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHNlbGVjdEVsLm9wdGlvbnNbc2VsZWN0RWwuc2VsZWN0ZWRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZpZWxkU2VsZWN0Q2hhbmdlKHNlbGVjdEVsLnZhbHVlLCBzZWxlY3RlZE9wdGlvbi5kYXRhc2V0LnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmllbGRTZWxlY3RDaGFuZ2UoZC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS52YWx1ZSwgZC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS5xdWVyeVNlbGVjdG9yKCdvcHRpb24nKS5kYXRhc2V0LnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luY2x1ZGUnOlxuXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdChgL3R3aWd2aXN1YWwvaW5jbHVkZXNgLCB7fSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy50ZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMudGVtcGxhdGVzLmZvckVhY2goKHRlbXBsYXRlTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zSFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7dGVtcGxhdGVOYW1lfVwiPiR7dGVtcGxhdGVOYW1lfTwvb3B0aW9uPmA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS5pbm5lckhUTUwgPSBvcHRpb25zSFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShlcnIuZXJyb3IgfHwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBkLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0d3YtZGlzcGxheS1ibG9jayB0d3YtbWItMVwiIGZvcj1cInR3dy1maWVsZC1vcHRpb24tJHtjbXAubmFtZX1cIj4ke2NtcC50aXRsZX08L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInR3dy1maWVsZC1vcHRpb24tJHtjbXAudHlwZX1cIiBjbGFzcz1cInR3di1jdXN0b20tc2VsZWN0XCIgbmFtZT1cIiR7Y21wLm5hbWV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtvcHRpb25zSFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIFxuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICd0d3YtcHQtMSB0d3YtbWItMyc7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1wcmltYXJ5IHR3di1tci0xIHR3di1idXR0b24tc3VibWl0XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1kb25lXCI+PC9pPlxuICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnQXBwbHknKX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4gdHd2LWJ1dHRvbi1jYW5jZWxcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnQ2FuY2VsJyl9XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jbGVhcmNsb3NlXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIGA7XG4gICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgICBjb25zdCBidXR0b25TdWJtaXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdWJtaXQnKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ2FuY2VsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tY2FuY2VsJyk7XG5cbiAgICAgICAgLy8gU3VibWl0IGRhdGFcbiAgICAgICAgYnV0dG9uU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRoaXMub3B0aW9ucy50ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5kYXRhXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBBcnJheS5mcm9tKGNvbXBvbmVudHNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKSkuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGFbZWwubmFtZV0gPSBlbC52YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQXJyYXkuZnJvbShjb21wb25lbnRzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEuZGF0YVtlbC5uYW1lXSA9IGVsLnZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBBcnJheS5mcm9tKGNvbXBvbmVudHNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhW2VsLm5hbWVdID0gZWwuY2hlY2tlZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrUmVxdWlyZWQoZGF0YS5kYXRhLCB0aGlzLmNvbXBvbmVudHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b25TdWJtaXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgYnV0dG9uQ2FuY2VsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KGAvdHdpZ3Zpc3VhbC9pbnNlcnQvJHt0eXBlVmFsdWV9YCwgZGF0YSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpbmRvd1JlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShlcnIuZXJyb3IgfHwgZXJyKTtcbiAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB9LCAnUE9TVCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDYW5jZWxcbiAgICAgICAgYnV0dG9uQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LXVpLWVsZW1lbnQtc2VsZWN0ID4gc2VsZWN0Jyk7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHd2LXNlbGVjdGVkLWVsZW1lbnQnKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHd2LWluZm8nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR3di1pbmZvJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vZGVUb2dnbGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0RWwudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RFbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmxvY2tVaVR5cGVDaGFuZ2UoZWxlbWVudFNlbGVjdGVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlRGVzdHJveSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2hlY2tSZXF1aXJlZChkYXRhLCBjb21wb25lbnRzKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBjbXAgb2YgY29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKGNtcC5yZXF1aXJlZCAmJiAhZGF0YVtjbXAubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnRyYW5zKCdUaGUgXCJ7dGl0bGV9XCIgZmllbGQgaXMgcmVxdWlyZWQuJywge3RpdGxlOiBjbXAudGl0bGV9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBjb21wb25lbnRCdXR0b25NYWtlU2VsZWN0ZWQoZGF0YUtleSkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJyk7XG4gICAgICAgIGlmICghY29tcG9uZW50c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShjb21wb25lbnRzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKTtcbiAgICAgICAgYnV0dG9ucyA9IGJ1dHRvbnMuZmlsdGVyKChidXR0b25FbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbkVsLmRhdGFzZXQudHd2S2V5ID09PSBkYXRhS2V5O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGJ1dHRvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLm1ha2VCdXR0b25TZWxlY3RlZChidXR0b25zWzBdLCB0cnVlLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeHBhdGggPSB0aGlzLmRhdGFbZGF0YUtleV0gfHwgbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW1vdmVTZWxlY3Rpb25Jbm5lckJ5WFBhdGgoeHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbZGF0YUtleV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmsgYnV0dG9uIGFzIHNlbGVjdGVkXG4gICAgICogQHBhcmFtIGJ1dHRvbkVsXG4gICAgICogQHBhcmFtIHNlbGVjdGVkXG4gICAgICogQHBhcmFtIGNhbmNlbEZ1bmNcbiAgICAgKi9cbiAgICBtYWtlQnV0dG9uU2VsZWN0ZWQoYnV0dG9uRWwsIHNlbGVjdGVkID0gdHJ1ZSwgY2FuY2VsRnVuYyA9IG51bGwpIHtcbiAgICAgICAgYnV0dG9uRWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICBpZiAoYnV0dG9uRWwucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3R3di1ibG9jay1hY3RpdmUtc3RhdHVzJykpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgndHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgndHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGl0bGUgPSBidXR0b25FbC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMgdHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMtYWN0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMtYWN0aXZlLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LWlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidHd2LWlucHV0LWdyb3VwLXRleHQgdHd2LWZsZXgtZmlsbFwiIHRpdGxlPVwiJHt0aXRsZX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tZG9uZSB0d3YtbXItMiB0d3YtdGV4dC1zdWNjZXNzXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLnRyYW5zKCdTZWxlY3RlZCcpfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtaW5wdXQtZ3JvdXAtYXBwZW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidHd2LWJ0biB0d3YtYmxvY2stYWN0aXZlLXN0YXR1cy1idXR0b24tY2FuY2VsXCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0NhbmNlbCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tY2xlYXJjbG9zZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKCd0d3YtYmxvY2stYWN0aXZlLXN0YXR1cy1pbmFjdGl2ZS1jb250ZW50Jyk7XG4gICAgICAgIHRoaXMuaW5zZXJ0QWZ0ZXIoZGl2LCBidXR0b25FbCk7XG4gICAgICAgIGRpdi5xdWVyeVNlbGVjdG9yKCcudHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMnKS5hcHBlbmRDaGlsZChidXR0b25FbCk7XG5cbiAgICAgICAgYnV0dG9uRWwucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcudHd2LWJsb2NrLWFjdGl2ZS1zdGF0dXMtYnV0dG9uLWNhbmNlbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FuY2VsRnVuYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNhbmNlbEZ1bmMoKSAmJiB0aGlzLm1ha2VCdXR0b25TZWxlY3RlZChidXR0b25FbCwgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VCdXR0b25TZWxlY3RlZChidXR0b25FbCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVTZWxlY3Rpb25PcHRpb25zKHhwYXRoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRTZWxlY3RlZCA9IHRoaXMuZ2V0RWxlbWVudEJ5WFBhdGgoeHBhdGgpO1xuICAgICAgICBpZiAoIWVsZW1lbnRTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbGVtZW50IGZvciBYUGF0aCBub3QgZm91bmQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnV0dG9uU3RhcnQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdGFydC1zZWxlY3QnKTtcbiAgICAgICAgdGhpcy5tYWtlQnV0dG9uU2VsZWN0ZWQoYnV0dG9uU3RhcnQsIHRydWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3kodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1pbm5lcicpLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGxldCBvcHRpb25zSFRNTCA9ICcnO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMudWlPcHRpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIG9wdGlvbnNIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHtrZXl9XCI+JHt0aGlzLm9wdGlvbnMudWlPcHRpb25zW2tleV0udGl0bGV9PC9vcHRpb24+YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgeHBhdGhFc2NhcGVkID0geHBhdGgucmVwbGFjZSgvW1xcXCJdL2csICcmcXVvdDsnKTtcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxiPlhQYXRoOjwvYj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3di1wLTEgdHd2LW1iLTMgdHd2LXNtYWxsIHR3di1iZy1ncmF5XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LXRleHQtb3ZlcmZsb3dcIiB0aXRsZT1cIiR7eHBhdGhFc2NhcGVkfVwiPiR7eHBhdGh9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTMgdHd2LW5vd3JhcFwiPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1tci0xIHR3di1idXR0b24tZWRpdC10ZXh0XCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0VkaXQgdGV4dCBjb250ZW50Jyl9XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jcmVhdGVtb2RlX2VkaXRlZGl0XCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LW1yLTEgdHd2LWJ1dHRvbi1lZGl0LWxpbmtcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnRWRpdCBsaW5rJyl9XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1saW5raW5zZXJ0X2xpbmtcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtbXItMSB0d3YtYnV0dG9uLXJlcGxhY2UtaW1hZ2VcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnUmVwbGFjZSBpbWFnZScpfVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24taW5zZXJ0X3Bob3RvaW1hZ2VwaG90b1wiPjwvaT5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1tci0xIHR3di1idXR0b24tZGVsZXRlLWVsZW1lbnRcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnRGVsZXRlIGVsZW1lbnQnKX1cIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWRlbGV0ZV9vdXRsaW5lXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LW1yLTEgdHd2LWJ1dHRvbi1tb3ZlLWVsZW1lbnRcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnTW92ZSBlbGVtZW50Jyl9XCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1tb3ZlXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LW1yLTEgdHd2LWJ1dHRvbi1yZXN0b3JlLXN0YXRpY1wiIHRpdGxlPVwiJHt0aGlzLnRyYW5zKCdSZXN0b3JlIHN0YXRpYycpfVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tY2FjaGVkXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTMgdHd2LXVpLWVsZW1lbnQtc2VsZWN0XCI+XG4gICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwidHd2LWN1c3RvbS1zZWxlY3RcIj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+LSAke3RoaXMudHJhbnMoJ0ludGVyZmFjZSBpdGVtIHR5cGUnKX0gLTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICR7b3B0aW9uc0hUTUx9XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItMyB0d3YtdWktY29tcG9uZW50c1wiPjwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWlubmVyJykuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1lbGVtZW50LXNlbGVjdCA+IHNlbGVjdCcpO1xuXG4gICAgICAgIC8vIFNlbGVjdCBVSSBlbGVtZW50IHR5cGVcbiAgICAgICAgc2VsZWN0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25CbG9ja1VpVHlwZUNoYW5nZShlbGVtZW50U2VsZWN0ZWQsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBCdXR0b24gZWRpdCB0ZXh0XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLWVkaXQtdGV4dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRDb250ZW50SW5pdChlbGVtZW50U2VsZWN0ZWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCdXR0b24gZWRpdCBsaW5rXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLWVkaXQtbGluaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdExpbmtJbml0KGVsZW1lbnRTZWxlY3RlZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVwbGFjZSBpbWFnZVxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1yZXBsYWNlLWltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlSW1hZ2VJbml0KGVsZW1lbnRTZWxlY3RlZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJ1dHRvbiBkZWxldGUgZWxlbWVudFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1kZWxldGUtZWxlbWVudCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlRWxlbWVudEluaXQoZWxlbWVudFNlbGVjdGVkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1tb3ZlLWVsZW1lbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB0aGlzLm1vdmVFbGVtZW50SW5pdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1yZXN0b3JlLXN0YXRpYycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZVN0YXRpY0luaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudFNlbGVjdGVkLCAndHd2LXNlbGVjdGVkLWVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFZGl0IHRleHQgY29udGVudFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRTZWxlY3RlZFxuICAgICAqL1xuICAgIGVkaXRUZXh0Q29udGVudEluaXQoZWxlbWVudFNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LXVpLWNvbXBvbmVudHMnKTtcbiAgICAgICAgY29uc3QgaW5uZXJIVE1MID0gZWxlbWVudFNlbGVjdGVkLmlubmVySFRNTDtcbiAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuLXByaW1hcnkgdHd2LW1yLTEgdHd2LWJ1dHRvbi1zdWJtaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1kb25lXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMudHJhbnMoJ1NhdmUnKX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0biB0d3YtbXItMSB0d3YtYnV0dG9uLWFkZC1saXN0XCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0FkZCB0byBvcGVyYXRpb25zIGxpc3QnKX1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1mb3JtYXRfbGlzdF9idWxsZXRlZFwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0biB0d3YtYnV0dG9uLWNhbmNlbFwiIHRpdGxlPVwiJHt0aGlzLnRyYW5zKCdDYW5jZWwnKX1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jbGVhcmNsb3NlXCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICAgICAgZWxlbWVudFNlbGVjdGVkLmRhdGFzZXQudHd2Q29udGVudCA9IGlubmVySFRNTDtcbiAgICAgICAgZWxlbWVudFNlbGVjdGVkLmNvbnRlbnRFZGl0YWJsZSA9IHRydWU7XG4gICAgICAgIGVsZW1lbnRTZWxlY3RlZC5mb2N1cygpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLXN1Ym1pdCcpO1xuICAgICAgICBjb25zdCBidXR0b25DYW5jZWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1jYW5jZWwnKTtcblxuICAgICAgICAvLyBTdWJtaXQgZGF0YVxuICAgICAgICBidXR0b25TdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZWxlbWVudFNlbGVjdGVkLmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnV0dG9uU3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCgnL3R3aWd2aXN1YWwvZWRpdF9jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogdGhpcy5vcHRpb25zLnRlbXBsYXRlTmFtZSxcbiAgICAgICAgICAgICAgICB4cGF0aDogdGhpcy5kYXRhLnNvdXJjZSxcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogZWxlbWVudFNlbGVjdGVkLmlubmVySFRNTFxuICAgICAgICAgICAgfSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpbmRvd1JlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShlcnIuZXJyb3IgfHwgZXJyKTtcbiAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB9LCAnUE9TVCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgdG8gYWN0aW9uIGxpc3RcbiAgICAgICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tYWRkLWxpc3QnKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb0FjdGlvbkJhdGNoKCdlZGl0X2NvbnRlbnQnLCB0aGlzLmRhdGEuc291cmNlLCB7dmFsdWU6IGVsZW1lbnRTZWxlY3RlZC5pbm5lckhUTUx9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENhbmNlbFxuICAgICAgICBidXR0b25DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZWxlbWVudFNlbGVjdGVkLmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVkaXQgbGlua1xuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRTZWxlY3RlZFxuICAgICAqL1xuICAgIGVkaXRMaW5rSW5pdChlbGVtZW50U2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRTZWxlY3RlZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdhJykge1xuICAgICAgICAgICAgYWxlcnQodGhpcy50cmFucygnVGhlIHNlbGVjdGVkIGl0ZW0gbXVzdCBoYXZlIHRhZyB7dGFnTmFtZX0uJywge3RhZ05hbWU6ICdBJ30pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZSgpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJyk7XG4gICAgICAgIGNvbnN0IGhyZWYgPSBlbGVtZW50U2VsZWN0ZWQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGVsZW1lbnRTZWxlY3RlZC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwidHd2LWRpc3BsYXktYmxvY2sgdHd2LW1iLTFcIiBmb3I9XCJ0d3ctZmllbGQtZWxlbWVudC1saW5rXCI+JHt0aGlzLnRyYW5zKCdVUkwnKX08L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidHd3LWZpZWxkLWVsZW1lbnQtbGlua1wiIGNsYXNzPVwidHd2LWZvcm0tY29udHJvbFwiIHZhbHVlPVwiJHtocmVmfVwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0d3YtZGlzcGxheS1ibG9jayB0d3YtbWItMVwiIGZvcj1cInR3dy1maWVsZC1lbGVtZW50LWxpbmtcIj4ke3RoaXMudHJhbnMoJ09wZW4gaW4nKX08L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJ0d3ctZmllbGQtbGluay10YXJnZXRcIiBjbGFzcz1cInR3di1jdXN0b20tc2VsZWN0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJfc2VsZlwiJHt0YXJnZXQgIT0gJ19ibGFuaycgPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJ30+JHt0aGlzLnRyYW5zKCd0aGUgY3VycmVudCB0YWInKX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIl9ibGFua1wiJHt0YXJnZXQgPT0gJ19ibGFuaycgPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJ30+JHt0aGlzLnRyYW5zKCdhIG5ldyB0YWInKX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4tcHJpbWFyeSB0d3YtbXItMSB0d3YtYnV0dG9uLXN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWRvbmVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnU2F2ZScpfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1tci0xIHR3di1idXR0b24tYWRkLWxpc3RcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnQWRkIHRvIG9wZXJhdGlvbnMgbGlzdCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWZvcm1hdF9saXN0X2J1bGxldGVkXCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1idXR0b24tY2FuY2VsXCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0NhbmNlbCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWNsZWFyY2xvc2VcIj48L2k+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgICBjb25zdCBidXR0b25TdWJtaXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdWJtaXQnKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ2FuY2VsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tY2FuY2VsJyk7XG5cbiAgICAgICAgLy8gU3VibWl0IGRhdGFcbiAgICAgICAgYnV0dG9uU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyh0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCcvdHdpZ3Zpc3VhbC9lZGl0X2xpbmsnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm9wdGlvbnMudGVtcGxhdGVOYW1lLFxuICAgICAgICAgICAgICAgIHhwYXRoOiB0aGlzLmRhdGEuc291cmNlLFxuICAgICAgICAgICAgICAgIGhyZWY6IGRpdi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogZGl2LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpLnZhbHVlXG4gICAgICAgICAgICB9LCAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2luZG93UmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2FuY2VsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQWxlcnRNZXNzYWdlKGVyci5lcnJvciB8fCBlcnIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvblN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgYnV0dG9uQ2FuY2VsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH0sICdQT1NUJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCB0byBhY3Rpb24gbGlzdFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1hZGQtbGlzdCcpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvQWN0aW9uQmF0Y2goJ2VkaXRfbGluaycsIHRoaXMuZGF0YS5zb3VyY2UsIHtcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogZGl2LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZGl2LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpLnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBDYW5jZWxcbiAgICAgICAgYnV0dG9uQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5jb250ZW50RWRpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBlbGVtZW50U2VsZWN0ZWQuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgaW1hZ2VcbiAgICAgKiBAcGFyYW0gZWxlbWVudFNlbGVjdGVkXG4gICAgICovXG4gICAgcmVwbGFjZUltYWdlSW5pdChlbGVtZW50U2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRTZWxlY3RlZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdpbWcnKSB7XG4gICAgICAgICAgICBhbGVydCh0aGlzLnRyYW5zKCdUaGUgc2VsZWN0ZWQgaXRlbSBtdXN0IGhhdmUgdGFnIHt0YWdOYW1lfS4nLCB7dGFnTmFtZTogJ0lNRyd9KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2UoKTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50c0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtdWktY29tcG9uZW50cycpO1xuICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zIHR3di10ZXh0LWNlbnRlclwiPjxpbWcgY2xhc3M9XCJ0d3YtaW1hZ2UtcHJldmlld1wiIHN0eWxlPVwibWF4LXdpZHRoOiA4MCU7XCI+PC9kaXY+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCIgbmFtZT1cImltYWdlX2ZpbGVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuLXByaW1hcnkgdHd2LW1yLTEgdHd2LWJ1dHRvbi1zdWJtaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1kb25lXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMudHJhbnMoJ1NhdmUnKX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0biB0d3YtYnV0dG9uLWNhbmNlbFwiIHRpdGxlPVwiJHt0aGlzLnRyYW5zKCdDYW5jZWwnKX1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0d3YtaWNvbi1jbGVhcmNsb3NlXCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uU3VibWl0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tc3VibWl0Jyk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNhbmNlbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLWNhbmNlbCcpO1xuICAgICAgICBjb25zdCBmaWxlRmllbGQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpO1xuICAgICAgICBjb25zdCBpbWFnZVByZXZpZXdFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtaW1hZ2UtcHJldmlldycpO1xuXG4gICAgICAgIGltYWdlUHJldmlld0VsLnNldEF0dHJpYnV0ZSgnc3JjJywgZWxlbWVudFNlbGVjdGVkLmdldEF0dHJpYnV0ZSgnc3JjJykpO1xuXG4gICAgICAgIC8vIFN1Ym1pdCBkYXRhXG4gICAgICAgIGJ1dHRvblN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RlbXBsYXRlTmFtZScsIHRoaXMub3B0aW9ucy50ZW1wbGF0ZU5hbWUpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd4cGF0aCcsIHRoaXMuZGF0YS5zb3VyY2UpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZUZpbGUnLCBmaWxlRmllbGQuZmlsZXNbMF0pO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCcvdHdpZ3Zpc3VhbC9yZXBsYWNlX2ltYWdlJywgZm9ybURhdGEsIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5kb3dSZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICAgICAgYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYW5jZWxcbiAgICAgICAgYnV0dG9uQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RlZC5jb250ZW50RWRpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRVUkwoaW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlUHJldmlld0VsLnNldEF0dHJpYnV0ZSgnc3JjJywgZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbGUgZmllbGRcbiAgICAgICAgZmlsZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICByZWFkVVJMKGUudGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVGaWVsZC5jbGljaygpO1xuXG4gICAgICAgIGltYWdlUHJldmlld0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGZpbGVGaWVsZC5jbGljaygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgc2VsZWN0ZWQgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRTZWxlY3RlZFxuICAgICAqL1xuICAgIGRlbGV0ZUVsZW1lbnRJbml0KGVsZW1lbnRTZWxlY3RlZCkge1xuICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZSgpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJyk7XG4gICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gZWxlbWVudFNlbGVjdGVkLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPtCS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0YPQtNCw0LvQuNGC0Ywg0LLRi9Cx0YDQsNC90L3Ri9C5INGN0LvQtdC80LXQvdGCPzwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4tcHJpbWFyeSB0d3YtbXItMSB0d3YtYnV0dG9uLXN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWRvbmVcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy50cmFucygnQ29uZmlybScpfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1tci0xIHR3di1idXR0b24tYWRkLWxpc3RcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnQWRkIHRvIG9wZXJhdGlvbnMgbGlzdCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWZvcm1hdF9saXN0X2J1bGxldGVkXCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1idXR0b24tY2FuY2VsXCIgdGl0bGU9XCIke3RoaXMudHJhbnMoJ0NhbmNlbCcpfVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInR3di1pY29uLWNsZWFyY2xvc2VcIj48L2k+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgICBjb25zdCBidXR0b25TdWJtaXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1zdWJtaXQnKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ2FuY2VsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tY2FuY2VsJyk7XG5cbiAgICAgICAgLy8gU3VibWl0IGRhdGFcbiAgICAgICAgYnV0dG9uU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyh0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCcvdHdpZ3Zpc3VhbC9kZWxldGVfZWxlbWVudCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRoaXMub3B0aW9ucy50ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICAgICAgeHBhdGg6IHRoaXMuZGF0YS5zb3VyY2VcbiAgICAgICAgICAgIH0sIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5kb3dSZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICAgICAgYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2FuY2VsXG4gICAgICAgIGJ1dHRvbkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb21wb25lbnRzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0byBhY3Rpb24gbGlzdFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWJ1dHRvbi1hZGQtbGlzdCcpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvQWN0aW9uQmF0Y2goJ2RlbGV0ZScsIHRoaXMuZGF0YS5zb3VyY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbW92ZUVsZW1lbnRJbml0KCkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di11aS1jb21wb25lbnRzJyk7XG4gICAgICAgIGNvbXBvbmVudHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZGVEZXN0cm95KHRydWUsIGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vZGVUb2dnbGUoZG9jdW1lbnQuYm9keSwgJ21vdmVUYXJnZXQnKTtcbiAgICAgICAgfSwgMSk7XG4gICAgfVxuXG4gICAgcmVzdG9yZVN0YXRpY0luaXQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LXVpLWNvbXBvbmVudHMnKTtcbiAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPiR7dGhpcy50cmFucygnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJldHVybiB0aGUgaXRlbSB0byBpdHMgb3JpZ2luYWwgc3RhdGU/Jyl9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1wcmltYXJ5IHR3di1tci0xIHR3di1idXR0b24tc3VibWl0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tZG9uZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLnRyYW5zKCdDb25maXJtJyl9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ0d3YtYnRuIHR3di1idG4gdHd2LWJ1dHRvbi1jYW5jZWxcIiB0aXRsZT1cIiR7dGhpcy50cmFucygnQ2FuY2VsJyl9XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidHd2LWljb24tY2xlYXJjbG9zZVwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGNvbXBvbmVudHNDb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tc3VibWl0Jyk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNhbmNlbCA9IGNvbXBvbmVudHNDb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1idXR0b24tY2FuY2VsJyk7XG5cbiAgICAgICAgLy8gU3VibWl0IGRhdGFcbiAgICAgICAgYnV0dG9uU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyh0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCcvdHdpZ3Zpc3VhbC9yZXN0b3JlX3N0YXRpYycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRoaXMub3B0aW9ucy50ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICAgICAgeHBhdGg6IHRoaXMuZGF0YS5zb3VyY2VcbiAgICAgICAgICAgIH0sIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5kb3dSZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICAgICAgYnV0dG9uU3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2FuY2VsXG4gICAgICAgIGJ1dHRvbkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZSgpO1xuICAgICAgICAgICAgY29tcG9uZW50c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkTmV3VGhlbWVJbml0KCkge1xuXG4gICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWlubmVyJyk7XG4gICAgICAgIGlubmVyQ29udGFpbmVyRWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwidHd2LWRpc3BsYXktYmxvY2sgdHd2LW1iLTFcIiBmb3I9XCJ0d3ctZmllbGQtdGhlbWUtbmFtZVwiPiR7dGhpcy50cmFucygnVGhlbWUgbmFtZScpfTwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInR3dy1maWVsZC10aGVtZS1uYW1lXCIgY2xhc3M9XCJ0d3YtZm9ybS1jb250cm9sXCI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTNcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInR3di1kaXNwbGF5LWJsb2NrIHR3di1tYi0xXCIgZm9yPVwidHd3LWZpZWxkLXRoZW1lLW1haW5wYWdlXCI+JHt0aGlzLnRyYW5zKCdIVE1MLWZpbGUgb2YgdGhlIG1haW4gcGFnZScpfTwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInR3dy1maWVsZC10aGVtZS1tYWlucGFnZVwiIGNsYXNzPVwidHd2LWZvcm0tY29udHJvbFwiIHZhbHVlPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1wcmltYXJ5IHR3di1tci0xIHR3di1idXR0b24tc3VibWl0XCI+JHt0aGlzLnRyYW5zKCdDcmVhdGUnKX08L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1idXR0b24tY2FuY2VsXCI+JHt0aGlzLnRyYW5zKCdDYW5jZWwnKX08L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgaW5uZXJDb250YWluZXJFbC5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICAgIGlubmVyQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignYnV0dG9uLnR3di1idXR0b24tc3VibWl0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgZmllbGRUaGVtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R3dy1maWVsZC10aGVtZS1uYW1lJyk7XG4gICAgICAgICAgICBjb25zdCBmaWVsZE1haW5wYWdlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHd3LWZpZWxkLXRoZW1lLW1haW5wYWdlJyk7XG4gICAgICAgICAgICBjb25zdCBidXR0b25FbCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCFmaWVsZFRoZW1lRWwudmFsdWUgfHwgIWZpZWxkTWFpbnBhZ2VFbC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBidXR0b25FbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCgnL3R3aWd2aXN1YWwvY3JlYXRlJywge1xuICAgICAgICAgICAgICAgIHRoZW1lOiBmaWVsZFRoZW1lRWwudmFsdWUsXG4gICAgICAgICAgICAgICAgbWFpbnBhZ2U6IGZpZWxkTWFpbnBhZ2VFbC52YWx1ZVxuICAgICAgICAgICAgfSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGFpbmVyRWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXMubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShyZXMubWVzc2FnZSwgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5uZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCdidXR0b24udHd2LWJ1dHRvbi1jYW5jZWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpbm5lckNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGROZXdUZW1wbGF0ZUluaXQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWlubmVyJyk7XG4gICAgICAgIGlubmVyQ29udGFpbmVyRWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgbGV0IG9wdGlvbnNIVE1MID0gJyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZXMuZm9yRWFjaCgodGVtcGxhdGVQYXRoKSA9PiB7XG4gICAgICAgICAgICBvcHRpb25zSFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7dGVtcGxhdGVQYXRofVwiPiR7dGVtcGxhdGVQYXRofTwvb3B0aW9uPmA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHRoaXMucmVxdWVzdCgnL3R3aWd2aXN1YWwvaHRtbF9maWxlcycsIHt9LCAocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICByZXMuZmlsZXMuZm9yRWFjaCgoZmlsZU5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7ZmlsZU5hbWV9XCI+JHtmaWxlTmFtZX08L29wdGlvbj5gO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0d3ctZmllbGQtc291cmNlLWZpbGUnKS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkQWxlcnRNZXNzYWdlKGVyci5lcnJvciB8fCBlcnIpO1xuICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidHd2LW1iLTNcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInR3di1kaXNwbGF5LWJsb2NrIHR3di1tYi0xXCIgZm9yPVwidHd3LWZpZWxkLXNvdXJjZS1maWxlXCI+JHt0aGlzLnRyYW5zKCdIVE1MLWZpbGUnKX08L2xhYmVsPlxuICAgICAgICAgICAgPHNlbGVjdCBpZD1cInR3dy1maWVsZC1zb3VyY2UtZmlsZVwiIGNsYXNzPVwidHd2LWN1c3RvbS1zZWxlY3RcIj48L3NlbGVjdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtbWItM1wiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwidHd2LWRpc3BsYXktYmxvY2sgdHd2LW1iLTFcIiBmb3I9XCJ0d3ctZmllbGQtdGVtcGxhdGUtbmFtZVwiPiR7dGhpcy50cmFucygnVGVtcGxhdGUgbmFtZScpfTwvbGFiZWw+XG4gICAgICAgICAgICA8c2VsZWN0IGlkPVwidHd3LWZpZWxkLXRlbXBsYXRlLW5hbWVcIiBjbGFzcz1cInR3di1jdXN0b20tc2VsZWN0XCI+XG4gICAgICAgICAgICAgICAgJHtvcHRpb25zSFRNTH1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3di1tYi0zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInR3di1idG4gdHd2LWJ0bi1wcmltYXJ5IHR3di1tci0xIHR3di1idXR0b24tc3VibWl0XCI+JHt0aGlzLnRyYW5zKCdDcmVhdGUnKX08L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidHd2LWJ0biB0d3YtYnRuIHR3di1idXR0b24tY2FuY2VsXCI+JHt0aGlzLnRyYW5zKCdDYW5jZWwnKX08L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgaW5uZXJDb250YWluZXJFbC5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICAgIGlubmVyQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignYnV0dG9uLnR3di1idXR0b24tc3VibWl0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBmaWVsZEZpbGVOYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHd3LWZpZWxkLXNvdXJjZS1maWxlJyk7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFRlbXBsYXRlTmFtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R3dy1maWVsZC10ZW1wbGF0ZS1uYW1lJyk7XG4gICAgICAgICAgICBjb25zdCBidXR0b25FbCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCFmaWVsZEZpbGVOYW1lRWwudmFsdWUgfHwgIWZpZWxkVGVtcGxhdGVOYW1lRWwudmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgYnV0dG9uRWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QoJy90d2lndmlzdWFsL2NyZWF0ZV90ZW1wbGF0ZScsIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmllbGRGaWxlTmFtZUVsLnZhbHVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogZmllbGRUZW1wbGF0ZU5hbWVFbC52YWx1ZVxuICAgICAgICAgICAgfSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpbm5lckNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChyZXMubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShyZXMubWVzc2FnZSwgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICAgICAgYnV0dG9uRWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5uZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCdidXR0b24udHd2LWJ1dHRvbi1jYW5jZWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpbm5lckNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgb3BlcmF0aW9uIGZvciBiYXRjaCBleGVjdXRpb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHhwYXRoXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBhZGRUb0FjdGlvbkJhdGNoKGFjdGlvbiwgeHBhdGgsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICB4cGF0aCxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZURlc3Ryb3kodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidXR0b25FbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYnV0dG9uLWV4ZWN1dGUtYmF0Y2gnKTtcbiAgICAgICAgYnV0dG9uRWwucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gYCR7dGhpcy5hY3Rpb25zLmxlbmd0aH1gO1xuICAgICAgICBidXR0b25FbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50QnlYUGF0aChhY3Rpb24ueHBhdGgpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3R3di1zZWxlY3RlZC1zdWNjZXNzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgYWN0aW9ucyBiYXRjaFxuICAgICAqL1xuICAgIGV4ZWN1dGVBY3Rpb25CYXRjaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLnJlcXVlc3QoJy90d2lndmlzdWFsL2JhdGNoJywge1xuICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0aGlzLm9wdGlvbnMudGVtcGxhdGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uczogdGhpcy5hY3Rpb25zXG4gICAgICAgIH0sIChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMud2luZG93UmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRBbGVydE1lc3NhZ2UoZXJyLmVycm9yIHx8IGVycik7XG4gICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSwgJ1BPU1QnKTtcbiAgICB9XG5cbiAgICByZXN0b3JlRnJvbVRlbXBsYXRlQ29weUEoKSB7XG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHRoaXMucmVxdWVzdCgnL3R3aWd2aXN1YWwvcmVzdG9yZV9iYWNrdXAnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZU5hbWU6IHRoaXMub3B0aW9ucy50ZW1wbGF0ZU5hbWVcbiAgICAgICAgfSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3dSZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZEFsZXJ0TWVzc2FnZShlcnIuZXJyb3IgfHwgZXJyKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9LCAnUE9TVCcpO1xuICAgIH1cbiAgICBcbiAgICBzaG93TG9hZGluZyhlbmFibGVkID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBlbmFibGVkO1xuICAgICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgndHd2LWxvYWRpbmcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3R3di1sb2FkaW5nJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICovXG4gICAgYWRkQWxlcnRNZXNzYWdlKG1lc3NhZ2UsIHR5cGUgPSAnZGFuZ2VyJykge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudHd2LWlubmVyJyk7XG4gICAgICAgIGlmIChpbm5lckNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYWxlcnQnKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFbChpbm5lckNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy50d3YtYWxlcnQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0d3YtYWxlcnQgdHd2LWFsZXJ0LSR7dHlwZX1cIj4ke21lc3NhZ2V9PC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIGlubmVyQ29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQodGhpcy5jbGVhck1lc3NhZ2UuYmluZCh0aGlzKSwgNDAwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCh0aGlzLmNsZWFyTWVzc2FnZS5iaW5kKHRoaXMpLCA0MDAwKTtcbiAgICB9XG4gICAgXG4gICAgY2xlYXJNZXNzYWdlKCkge1xuICAgICAgICBjb25zdCBpbm5lckNvbnRhaW5lckVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnR3di1pbm5lcicpO1xuICAgICAgICBpZiAoaW5uZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudHd2LWFsZXJ0JykpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRWwoaW5uZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudHd2LWFsZXJ0JykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSBwYWRkaW5nIG9mIHRoZSBIVE1MIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAqL1xuICAgIGRpc3BsYXlQYWRkaW5nKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgY29tcFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICBsZXQgYm94U2hhZG93ID0gJzAgMCAwIDJweCAjMDA3YmZmJztcbiAgICAgICAgaWYgKGNvbXBTdHlsZXNbJ3BhZGRpbmctdG9wJ10gIT09ICcwcHgnKSB7XG4gICAgICAgICAgICBib3hTaGFkb3cgKz0gYCwgaW5zZXQgMCAke2NvbXBTdHlsZXNbJ3BhZGRpbmctdG9wJ119IDAgMCByZ2JhKDUwLDE2OCw4MiwwLjE1KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXBTdHlsZXNbJ3BhZGRpbmctYm90dG9tJ10gIT09ICcwcHgnKSB7XG4gICAgICAgICAgICBib3hTaGFkb3cgKz0gYCwgaW5zZXQgMCAtJHtjb21wU3R5bGVzWydwYWRkaW5nLWJvdHRvbSddfSAwIDAgcmdiYSg1MCwxNjgsODIsMC4xNSlgO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wU3R5bGVzWydwYWRkaW5nLWxlZnQnXSAhPT0gJzBweCcpIHtcbiAgICAgICAgICAgIGJveFNoYWRvdyArPSBgLCBpbnNldCAke2NvbXBTdHlsZXNbJ3BhZGRpbmctbGVmdCddfSAwIDAgMCByZ2JhKDUwLDE2OCw4MiwwLjE1KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXBTdHlsZXNbJ3BhZGRpbmctcmlnaHQnXSAhPT0gJzBweCcpIHtcbiAgICAgICAgICAgIGJveFNoYWRvdyArPSBgLCBpbnNldCAtJHtjb21wU3R5bGVzWydwYWRkaW5nLXJpZ2h0J119IDAgMCAwIHJnYmEoNTAsMTY4LDgyLDAuMTUpYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm94U2hhZG93KSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9IGJveFNoYWRvdztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFqYXggcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBzdWNjZXNzRm5cbiAgICAgKiBAcGFyYW0gZmFpbEZuXG4gICAgICogQHBhcmFtIG1ldGhvZFxuICAgICAqL1xuICAgIHJlcXVlc3QodXJsLCBkYXRhLCBzdWNjZXNzRm4sIGZhaWxGbiwgbWV0aG9kID0gJ0dFVCcpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICByZXF1ZXN0Lm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBbJ3snLCdbJ10uaW5kZXhPZihyZXF1ZXN0LnJlc3BvbnNlVGV4dC5zdWJzdHIoMCwxKSkgPiAtMVxuICAgICAgICAgICAgICAgID8gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dClcbiAgICAgICAgICAgICAgICA6IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VjY2Vzc0ZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NGbihyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmYWlsRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbEZuKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmYWlsRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBmYWlsRm4ocmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gICAgICAgIGlmICghKGRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkpIHtcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZChkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHdpbmRvd1JlbG9hZCgpIHtcbiAgICAgICAgbGV0IGxvY2F0aW9uSHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbG9jYXRpb25IcmVmO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTZXQgc3R5bGVzIHRvIHBhcmVudHNcbiAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAqIEBwYXJhbSBzdHlsZXNcbiAgICAgKi9cbiAgICBzZXRUb1BhcmVudHMoZWxlbWVudCwgc3R5bGVzKSB7XG4gICAgICAgIGlmICghZWxlbWVudFxuICAgICAgICAgICAgfHwgIWVsZW1lbnQucGFyZW50Tm9kZVxuICAgICAgICAgICAgfHwgZWxlbWVudC50YWdOYW1lID09PSAnQk9EWSdcbiAgICAgICAgICAgIHx8IGVsZW1lbnQucGFyZW50Tm9kZS50YWdOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3Qua2V5cyhzdHlsZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnN0eWxlW2tleV0gPSBzdHlsZXNba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgIT09ICdCT0RZJykge1xuICAgICAgICAgICAgdGhpcy5zZXRUb1BhcmVudHMoZWxlbWVudC5wYXJlbnROb2RlLCBzdHlsZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIEhUTUwgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbFxuICAgICAqL1xuICAgIHJlbW92ZUVsKGVsKSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnQgSFRNTCBlbGVtZW50IGFmdGVyIG90aGVyIG9uZVxuICAgICAqIEBwYXJhbSBuZXdOb2RlXG4gICAgICogQHBhcmFtIHJlZmVyZW5jZU5vZGVcbiAgICAgKi9cbiAgICBpbnNlcnRBZnRlcihuZXdOb2RlLCByZWZlcmVuY2VOb2RlKSB7XG4gICAgICAgIHJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZS5uZXh0U2libGluZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0IEhUTUwgZWxlbWVudCBiZWZvcmUgb3RoZXIgb25lXG4gICAgICogQHBhcmFtIG5ld05vZGVcbiAgICAgKiBAcGFyYW0gcmVmZXJlbmNlTm9kZVxuICAgICAqL1xuICAgIGluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlKSB7XG4gICAgICAgIHJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gbm9kZVR5cGVcbiAgICAgKiBAcGFyYW0gY291bnRcbiAgICAgKiBAcmV0dXJucyB7Tm9kZSB8IG51bGx9XG4gICAgICovXG4gICAgZ2V0Tm9kZVByZXZpb3VzU2libGluZ0J5VHlwZShlbGVtZW50LCBub2RlVHlwZSwgY291bnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQucHJldmlvdXNTaWJsaW5nICYmIGVsZW1lbnQucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlICE9PSBub2RlVHlwZSAmJiBjb3VudCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVQcmV2aW91c1NpYmxpbmdCeVR5cGUoZWxlbWVudC5wcmV2aW91c1NpYmxpbmcsIG5vZGVUeXBlLCAtLWNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudC5wcmV2aW91c1NpYmxpbmc7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVSYW5kb21TdHJpbmcobGVuZ3RoID0gOCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgICAgICAgdmFyIGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgc2V0Q29va2llKGNuYW1lLCBjdmFsdWUsIGV4ZGF5cyA9IDcpIHtcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgICAgICB2YXIgZXhwaXJlcyA9ICdleHBpcmVzPScgKyBkLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgJz0nICsgY3ZhbHVlICsgJzsnICsgZXhwaXJlcyArICc7cGF0aD0vJztcbiAgICB9XG5cbiAgICBnZXRDb29raWUoY25hbWUpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArICc9JztcbiAgICAgICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcbiAgICAgICAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDxjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcbiAgICAgICAgICAgICAgICBjID0gYy5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBUd2lnVmlzdWFsO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==